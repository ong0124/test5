import ye from"./D3tGKj3w.js";import{d as ce,n as oe,p as ue,r,b as p,c as _,e,f as a,j as $e,t as l,k,F as xe,g as We,v as L,x as qe,y as Fe,i as G,s as ke,z as Ee,l as He,A as ee,o as Be,B as F,C as E,w as b,h as te,D as Te,E as D,G as Pe}from"./1vrHu2ec.js";import{_ as De}from"./ScVfVBns.js";import{l as ge,a as le,T as Oe,C as Ce,b as Me,c as Ue}from"./B1K5QE06.js";import{l as Re}from"./CqHbtmTb.js";import{l as Ye,a as je}from"./D0S-5ub-.js";import{D as Ae,S as Se,B as Le}from"./Dey0YEtk.js";import"./Bx7J-uke.js";const Ge={class:"relative"},Je={key:0,class:"absolute bg-white text-black rounded-md shadow-lg mt-2 z-10"},Ke=["id","value"],Qe=["for"],Xe=ce({__name:"LangSwitcher",setup(d){const{locales:h,locale:g,setLocale:M}=oe(),y=ue({get:()=>g.value,set:w=>{M(w)}}),u=r(!1),v=()=>{u.value=!u.value},T=w=>{y.value=w,u.value=!1};return(w,$)=>{const P=ye;return p(),_("div",Ge,[e("button",{class:"flex items-center border-2 bg-lwm-100 border-white rounded-3xl text-white px-2",onClick:v},[a(P,{name:"tabler-arrows-exchange",class:"mr-1"}),$e(" "+l(k(y)),1)]),k(u)?(p(),_("ul",Je,[(p(!0),_(xe,null,We(k(h),f=>(p(),_("li",{key:typeof f=="object"?f.code:f,class:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-100"},[L(e("input",{type:"radio",id:typeof f=="object"?f.code:f,value:typeof f=="object"?f.code:f,"onUpdate:modelValue":$[0]||($[0]=C=>Fe(y)?y.value=C:null),onChange:$[1]||($[1]=C=>T(k(y))),class:"mr-2"},null,40,Ke),[[qe,k(y)]]),e("label",{for:typeof f=="object"?f.code:f,class:"cursor-pointer"},l(typeof f=="object"?f.name:f),9,Qe)]))),128))])):G("",!0)])}}}),Ze={},et={class:"py-4 border-b bg-[url('/assets/images/headerTest2.png')] bg-cover bg-center flex items-center"},tt={class:"absolute left-1/2 transform -translate-x-1/2 text-xl text-white capitalize"};function lt(d,h){const g=Xe;return p(),_("header",et,[e("div",null,[a(g,{class:"pl-4"})]),e("h1",tt,l(d.$t("title")),1)])}const ot=ke(Ze,[["render",lt]]),st=ce({name:"TermsPopup",setup(){return{showPopup:r(!1)}}}),at={class:"flex"},nt={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10"},it={class:"bg-white p-6 rounded-lg shadow-lg max-w-sm"},rt={class:"text-lg font-bold mb-4"},dt={class:"text-xs text-gray-700"},ut={class:"text-base font-medium"},ct={class:"text-base font-medium"},mt={class:"text-base font-medium"};function pt(d,h,g,M,y,u){return p(),_("div",at,[e("a",{href:"#",class:"text-sm text-blue-700 ml-1",onClick:h[0]||(h[0]=Ee(v=>d.showPopup=!0,["prevent"]))},l(d.$t("HomePage.terms")),1),d.showPopup?(p(),_("div",nt,[e("div",it,[e("h2",rt,l(d.$t("HomePage.terms")),1),e("div",dt,[e("p",ut,l(d.$t("PopUpRules.title1")),1),e("p",null,l(d.$t("PopUpRules.general_ticket")),1),e("p",null,l(d.$t("PopUpRules.infant_ticket")),1),e("p",ct,l(d.$t("PopUpRules.title2")),1),e("p",null,l(d.$t("PopUpRules.notice")),1),e("p",null,l(d.$t("PopUpRules.real_info")),1),e("p",null,l(d.$t("PopUpRules.online_deadline")),1),e("p",null,l(d.$t("PopUpRules.refund_deadline")),1),e("p",null,l(d.$t("PopUpRules.ticket_validity")),1),e("p",null,l(d.$t("PopUpRules.contact")),1),e("p",mt,l(d.$t("PopUpRules.title3")),1),e("p",null,l(d.$t("PopUpRules.process")),1),e("p",null,l(d.$t("PopUpRules.safety")),1),e("p",null,l(d.$t("PopUpRules.valuables")),1),e("p",null,l(d.$t("PopUpRules.insurance")),1),e("p",null,l(d.$t("PopUpRules.invoice")),1)]),e("button",{class:"mt-4 px-4 py-2 bg-lwm-400 text-white rounded hover:bg-green-700",onClick:h[1]||(h[1]=v=>d.showPopup=!1)},l(d.$t("okButton")),1)])])):G("",!0)])}const Ne=ke(st,[["render",pt]]),ft={class:"flex-col p-4"},vt={class:"border-l-4 my-3 border-lwm-400 text-justify pl-2"},_t={class:"flex justify-around"},ht={class:"flex"},gt={class:"flex-1 text-gray-500 ml-2"},bt={class:"flex"},yt={class:"flex-1 text-gray-500 ml-2"},$t={class:"flex justify-evenly"},xt={key:0,class:"ml-auto text-2xl"},kt={key:1,class:"ml-auto text-2xl"},wt={key:2,class:"mr-auto text-2xl"},Ht={key:3,class:"mr-auto text-2xl"},Bt={class:"flex flex-col pt-3 pl-4"},Tt={key:0,class:"flex items-center pb-1"},Pt={class:"flex pr-4"},Dt={class:"text-lwm-500"},Ot={class:"border rounded-lg"},Ct=["placeholder"],Mt={class:"flex"},Ut={key:0,class:"text-lwm-500"},Rt={key:1,class:"text-lwm-500"},Yt={class:"flex pt-2 pl-4 space-x-4"},jt={class:"flex flex-col py-2 pl-4"},At={class:"flex items-center"},St={class:"flex pr-4"},Lt={class:"text-lwm-500"},Nt={class:"flex pl-4"},zt={class:"text-lwm-500"},Vt={class:"flex pt-2 pl-4 space-x-4"},It={class:"flex pl-6 pt-2 justify-evenly content-center"},Wt={class:"flex flex-1"},qt={class:"flex-1"},Ft={class:"flex-1 flex"},Et={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},Gt={class:"flex pl-6 pt-2 justify-evenly content-center"},Jt={class:"flex flex-1"},Kt={class:"flex-1"},Qt={class:"flex-1 flex"},Xt={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},Zt={class:"flex pl-6 pt-3 justify-evenly content-center"},el={class:"flex-1"},tl={class:"flex-1"},ll={class:"flex py-4 px-6 content-center"},ol={class:"flex-none pr-6"},sl=["placeholder"],al={class:"flex py-4 px-6 content-center"},nl={class:"flex-none pr-2"},il=["placeholder"],rl={class:"flex justify-center"},dl={for:"checkbox",class:"ml-2 text-sm text-gray-700"},ul={class:"pt-1 flex justify-center pb-4"},cl=ce({__name:"OneWayTicket",setup(d){const{locale:h}=oe(),g=He(),M=r(!1),y=r(),u=r(),v=r(""),T=r(""),w=r(""),$=r(""),P=r(""),f=r(""),C=r(""),O=r({adult:1,child:1}),N=r("oneWay"),I=ue(()=>{const s=O.value.adult;return Math.min(s,2)*150+Math.max(s-2,0)*100}),x=r(!1),W={"zh-CN":Me,"zh-TW":ge,"en-US":Re},j=ue(()=>W[h.value]||ge),{t:U}=oe(),A=()=>Array.from({length:24},(s,n)=>n).filter(s=>s<8||s>18),se=s=>s===8?Array.from({length:60},(n,c)=>c).filter(n=>n<30):s===18?Array.from({length:60},(n,c)=>c).filter(n=>n>=1):[],J=()=>{const s=D(f.value,"HH:mm").hour();return Array.from({length:24},(n,c)=>c).filter(n=>n<s||n>18)},ae=s=>{const n=D(f.value,"HH:mm").minute();return s===8?Array.from({length:60},(c,H)=>H).filter(c=>c<30):s===19?Array.from({length:60},(c,H)=>H).filter(c=>c>=1):Array.from({length:60},(c,H)=>H).filter(c=>c<n)};ee(v,s=>{if(s){const n=D(s,"HH:mm").add(30,"minute"),c=D(s,"HH:mm").add(90,"minute");P.value=c.format("HH:mm"),f.value=c.format("HH:mm"),T.value=n.format("HH:mm")}else T.value="",f.value="",P.value=""});const K=s=>{Ue.open({message:U("HomePage.notification.title"),description:U("HomePage.notification.description"),placement:s})},Q=s=>{s&&le.info(U("alertMessage2"))},me=s=>{s&&le.info(U("alertMessage3"))},pe=s=>{s&&le.info(U("alertMessage"))};ee(y,s=>{s?(u.value=s,v.value=""):(u.value=void 0,v.value="")});const X=()=>{x.value=!x.value},Z=s=>{if(!re.value)return!0;const n=s&&s.isBefore(D().add(1,"day").startOf("day")),c=ie.value.some(H=>{const R=D(H.startOffDays),z=H.endOffDays?D(H.endOffDays):R;return console.log("OffDay Range:",R.format("YYYY-MM-DD"),"to",z.format("YYYY-MM-DD")),s.isSameOrAfter(R,"day")&&s.isSameOrBefore(z,"day")});return n||c},ne=s=>{O.value[s]++},fe=s=>{O.value[s]>0&&O.value[s]--},ve=async()=>{if(!M.value)K("bottom");else{let s=Ye();if((!s||!s.user_id)&&(alert(U("alertMessage13")),s=await je(),!s)){console.log("登入失敗");return}const n={trip_type:N.value,LineID:s.user_id,adult_num:O.value.adult,child_num:O.value.child,contact_phone:w.value,totalprice:I.value,contact_name:C.value,departure_loc:x.value?"Booking.airport":"Booking.pier",destination_loc:x.value?"Booking.pier":"Booking.airport",return_departure:void 0,return_destination:void 0,arrivalpoint_date:y.value?y.value.format("YYYY-MM-DD"):void 0,arrivalpoint_time:v.value,return_arrival_date:void 0,return_arrival_time:void 0,flight_num:$.value||void 0,ferry_time:f.value||void 0,flight_time:P.value||void 0,shuttle_date:u.value?u.value.format("YYYY-MM-DD"):void 0,shuttle_time:T.value,return_shuttle_date:void 0,return_shuttle_time:void 0};try{const c=await $fetch("/api/POSTbooking",{method:"POST",body:n});if(c!=null&&c.id){const H=c.id[0].id,R=g("/confirmationPage/"+H);Pe({path:R,query:{isSwapped:String(x.value)}})}}catch{alert(U("alertMessage4"))}}},ie=r([]),_e=r([]),re=r(!1);return Be(async()=>{if(!re.value)try{const s=await $fetch("/api/GETallOffdays");_e.value=s.data,ie.value=_e.value.map(n=>({id:n.id,startOffDays:n.start_offDays,endOffDays:n.end_offDays,created_at:n.created_at,create_by:n.created_by})),re.value=!0}catch{alert("Fetch error")}}),(s,n)=>{const c=ye,H=Ae,R=Se,z=Oe,q=Ce,he=De,de=Ne,we=Le;return p(),_(xe,null,[e("div",ft,[e("p",vt,l(s.$t("HomePage.oneWay")),1),e("div",_t,[e("div",ht,[a(c,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",gt,l(s.$t("Booking.departure")),1)]),e("div",bt,[a(c,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",yt,l(s.$t("Booking.arrival")),1)])]),e("div",$t,[x.value?(p(),_("p",xt,l(s.$t("Booking.airport")),1)):(p(),_("p",kt,l(s.$t("Booking.pier")),1)),a(c,{name:"fa6-solid:rotate",class:F(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":x.value}]),onClick:X},null,8,["class"]),x.value?(p(),_("p",wt,l(s.$t("Booking.pier")),1)):(p(),_("p",Ht,l(s.$t("Booking.airport")),1))]),n[14]||(n[14]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",Bt,[x.value?(p(),_("div",Tt,[e("div",Pt,[a(c,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",Dt,l(s.$t("Booking.flightNumber")),1)]),e("div",Ot,[L(e("input",{type:"text",placeholder:s.$t("Booking.required"),"onUpdate:modelValue":n[0]||(n[0]=t=>$.value=t),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,Ct),[[E,$.value]])])])):G("",!0),e("div",Mt,[a(c,{name:x.value?"i-material-symbols-flight-land":"i-majesticons-ship-line",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),x.value?(p(),_("p",Ut,l(s.$t("Booking.arrivalAtAirportTime")),1)):(p(),_("p",Rt,l(s.$t("Booking.arrivalPortTime")),1))])]),a(q,{locale:k(j)},{default:b(()=>[e("div",Yt,[a(R,{direction:"vertical",size:12},{default:b(()=>[a(H,{value:y.value,"onUpdate:value":n[1]||(n[1]=t=>y.value=t),"disabled-date":Z,"show-today":!1,onOpenChange:Q,inputReadOnly:!0},null,8,["value"])]),_:1}),a(z,{value:v.value,"onUpdate:value":n[2]||(n[2]=t=>v.value=t),"value-format":"HH:mm","minute-step":x.value?5:30,"hour-step":1,"disabled-hours":A,"disabled-minutes":se,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!y.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",jt,[e("div",At,[e("div",St,[a(c,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",Lt,l(x.value?s.$t("Booking.ferryTime"):s.$t("Booking.flightTime")),1)]),e("div",null,[x.value?(p(),te(q,{key:0,locale:k(j)},{default:b(()=>[a(z,{value:f.value,"onUpdate:value":n[3]||(n[3]=t=>f.value=t),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":J,"disabled-minutes":ae,"hide-disabled-options":!0,"show-now":!1,disabled:!v.value,onOpenChange:pe,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(p(),te(q,{key:1,locale:k(j)},{default:b(()=>[a(z,{value:P.value,"onUpdate:value":n[4]||(n[4]=t=>P.value=t),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":J,"disabled-minutes":ae,"hide-disabled-options":!0,"show-now":!1,disabled:!v.value,onOpenChange:me,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",Nt,[a(c,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",zt,l(s.$t("Booking.shuttleBusTime")),1)]),a(q,{locale:k(j)},{default:b(()=>[e("div",Vt,[a(R,{direction:"vertical",size:12},{default:b(()=>[a(H,{value:u.value,"onUpdate:value":n[5]||(n[5]=t=>u.value=t),disabled:!0},null,8,["value"])]),_:1}),a(z,{value:T.value,"onUpdate:value":n[6]||(n[6]=t=>T.value=t),"minute-step":30,"value-format":"HH:mm",disabled:!0,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),a(he),e("div",It,[e("div",Wt,[e("p",qt,l(s.$t("Booking.adultTicket")),1),e("div",Ft,[e("button",{onClick:n[7]||(n[7]=t=>fe("adult"))},[a(c,{name:"i-mdi-minus-circle-outline"})]),e("p",Et,l(O.value.adult),1),e("button",{onClick:n[8]||(n[8]=t=>ne("adult"))},[a(c,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",Gt,[e("div",Jt,[e("p",Kt,l(s.$t("Booking.childTicket")),1),e("div",Qt,[e("button",{onClick:n[9]||(n[9]=t=>fe("child"))},[a(c,{name:"i-mdi-minus-circle-outline"})]),e("p",Xt,l(O.value.child),1),e("button",{onClick:n[10]||(n[10]=t=>ne("child"))},[a(c,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",Zt,[e("p",el,l(s.$t("Booking.ticketPrice")),1),e("p",tl,"NT$ "+l(k(I))+l(s.$t("Booking.pricePerPerson")),1)]),e("div",ll,[e("p",ol,l(s.$t("Booking.contact")),1),L(e("input",{type:"text",placeholder:s.$t("Booking.required"),"onUpdate:modelValue":n[11]||(n[11]=t=>C.value=t),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,sl),[[E,C.value]])]),e("div",al,[e("p",nl,l(s.$t("Booking.phone")),1),L(e("input",{type:"text",placeholder:s.$t("Booking.required"),"onUpdate:modelValue":n[12]||(n[12]=t=>w.value=t),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,il),[[E,w.value]])])]),e("div",rl,[L(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":n[13]||(n[13]=t=>M.value=t),class:"h-5 w-3 border-black rounded-full"},null,512),[[Te,M.value]]),e("label",dl,l(s.$t("HomePage.readAgreement")),1),a(de)]),e("div",ul,[a(we,{type:"primary",onClick:ve,class:"w-2/3 rounded-lg !bg-lwm-400 text-white active:!bg-lime-700"},{default:b(()=>[$e(l(s.$t("HomePage.confirm")),1)]),_:1})])],64)}}}),ml={class:"flex-col p-4"},pl={class:"border-l-4 my-3 border-lwm-400 text-justify pl-2"},fl={class:"flex justify-around"},vl={class:"flex"},_l={class:"flex-1 text-gray-500 ml-2"},hl={class:"flex"},gl={class:"flex-1 text-gray-500 ml-2"},bl={class:"flex justify-evenly"},yl={class:"ml-auto text-2xl"},$l={class:"mr-auto text-2xl"},xl={class:"flex flex-col pt-3 pl-4"},kl={key:0,class:"flex items-center pb-1"},wl={class:"flex pr-4"},Hl={class:"text-lwm-500"},Bl={class:"border rounded-lg"},Tl=["placeholder"],Pl={class:"flex"},Dl={key:0,class:"text-lwm-500"},Ol={key:1,class:"text-lwm-500"},Cl={class:"flex pt-2 pl-4 space-x-4"},Ml={class:"flex flex-col py-2 pl-4"},Ul={class:"flex items-center"},Rl={class:"flex pr-4"},Yl={class:"text-lwm-500"},jl={class:"flex pl-4"},Al={class:"text-lwm-500"},Sl={class:"flex pt-2 pl-4 space-x-4"},Ll={class:"border-l-4 my-3 border-orange-400 text-justify pl-2"},Nl={class:"flex justify-around"},zl={class:"flex"},Vl={class:"flex-1 text-gray-500 ml-2"},Il={class:"flex"},Wl={class:"flex-1 text-gray-500 ml-2"},ql={class:"flex justify-evenly"},Fl={class:"ml-auto text-2xl"},El={class:"mr-auto text-2xl"},Gl={class:"flex flex-col pt-3 pl-4"},Jl={key:0,class:"flex items-center pb-1"},Kl={class:"flex pr-4"},Ql={class:"text-lwm-500"},Xl={class:"border rounded-lg"},Zl=["placeholder"],eo={class:"flex"},to={key:0,class:"text-lwm-500"},lo={key:1,class:"text-lwm-500"},oo={class:"flex pt-2 pl-4 space-x-4"},so={class:"flex flex-col py-2 pl-4"},ao={class:"flex items-center"},no={class:"flex pr-4"},io={class:"text-lwm-500"},ro={class:"flex pl-4"},uo={class:"text-lwm-500"},co={class:"flex pt-2 pl-4 space-x-4"},mo={class:"flex pl-6 pt-2 justify-evenly content-center"},po={class:"flex flex-1"},fo={class:"flex-1"},vo={class:"flex-1 flex"},_o={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},ho={class:"flex pl-6 pt-2 justify-evenly content-center"},go={class:"flex flex-1"},bo={class:"flex-1"},yo={class:"flex-1 flex"},$o={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},xo={class:"flex pl-6 pt-3 justify-evenly content-center"},ko={class:"flex-1"},wo={class:"flex-1"},Ho={class:"flex py-4 px-6 content-center"},Bo={class:"flex-none pr-6"},To=["placeholder"],Po={class:"flex py-4 px-6 content-center"},Do={class:"flex-none pr-2"},Oo=["placeholder"],Co={class:"flex justify-center"},Mo={for:"checkbox",class:"ml-2 text-sm text-gray-700"},Uo={class:"pt-1 flex justify-center pb-4"},Ro=ce({__name:"RoundedWayTicket",setup(d){const h=r("roundTrip"),{t:g}=oe(),M=He(),{locale:y}=oe(),u=r(!1),v=r(),T=r(),w=r(),$=r(),P=r(""),f=r(""),C=r(""),O=r(""),N=r(""),I=r(""),x=r(""),W=r(""),j=r(""),U=r(!1),A=r({adult:1,child:1}),se=r(""),J=r(""),ae=ue(()=>{const t=A.value.adult;return Math.min(t,2)*300+Math.max(t-2,0)*200}),K=r({p2:g("Booking.pier"),p3:g("Booking.airport")}),Q=r({p2:g("Booking.airport"),p3:g("Booking.pier")}),me=()=>Array.from({length:24},(t,o)=>o).filter(t=>t<8||t>18),pe=t=>t===8?Array.from({length:60},(o,i)=>i).filter(o=>o<30):t===18?Array.from({length:60},(o,i)=>i).filter(o=>o>=30):[],X=()=>{const t=D(N.value,"HH:mm").hour();return Array.from({length:24},(o,i)=>i).filter(o=>o<t||o>18)},Z=t=>{const o=D(N.value,"HH:mm").minute();return t===8?Array.from({length:60},(i,B)=>B).filter(i=>i<30):t===19?Array.from({length:60},(i,B)=>B).filter(i=>i>=1):Array.from({length:60},(i,B)=>B).filter(i=>i<o)},ne=t=>{t&&le.info(g("alertMessage"))},fe=t=>{t&&le.info(g("alertMessage2"))},ve=t=>{t&&le.info(g("alertMessage3"))};ee(P,t=>{if(t){const o=D(t,"HH:mm").add(30,"minute"),i=D(t,"HH:mm").add(90,"minute");O.value=i.format("HH:mm"),N.value=i.format("HH:mm"),f.value=o.format("HH:mm")}else f.value="",N.value="",O.value=""}),ee(W,t=>{if(t){const o=D(t,"HH:mm").add(30,"minute"),i=D(t,"HH:mm").add(90,"minute");x.value=i.format("HH:mm"),I.value=i.format("HH:mm"),j.value=o.format("HH:mm")}else j.value="",x.value="",I.value=""}),ee(w,t=>{t?$.value=t:$.value=void 0}),ee(v,t=>{t?T.value=t:(T.value=void 0,P.value="")});const ie=t=>{if(!de.value)return!0;const o=t&&t.isBefore(D().add(1,"day").startOf("day")),i=q.value.some(B=>{const S=D(B.startOffDays),Y=B.endOffDays?D(B.endOffDays):S;return console.log("OffDay Range:",S.format("YYYY-MM-DD"),"to",Y.format("YYYY-MM-DD")),t.isSameOrAfter(S,"day")&&t.isSameOrBefore(Y,"day")});return o||i},_e=t=>t&&(!v.value||t.isBefore(v.value)),re=t=>t&&(!v.value||t.isBefore(v.value)),be=()=>{u.value=!u.value},s={"zh-CN":Me,"zh-TW":ge,"en-US":Re},n=ue(()=>s[y.value]||ge),c=t=>{Ue.open({message:g("HomePage.notification.title"),description:g("HomePage.notification.description"),placement:t})},H=t=>{A.value[t]++},R=t=>{A.value[t]>0&&A.value[t]--},z=async()=>{if(!U.value)c("bottom");else{let t=await Ye();if((!t||!t.user_id)&&(alert(g("alertMessage13")),t=await je(),!t)){console.log("登入失敗");return}const o={trip_type:h.value,LineID:t.user_id,adult_num:A.value.adult,child_num:A.value.child,contact_phone:J.value,totalprice:ae.value,contact_name:se.value,departure_loc:u.value?"Booking.airport":"Booking.pier",destination_loc:u.value?"Booking.pier":"Booking.airport",return_departure:u.value?"Booking.pier":"Booking.airport",return_destination:u.value?"Booking.airport":"Booking.pier",arrivalpoint_date:v.value?v.value.format("YYYY-MM-DD"):void 0,arrivalpoint_time:P.value,return_arrival_date:w.value?w.value.format("YYYY-MM-DD"):void 0,return_arrival_time:W.value,flight_num:C.value||void 0,ferry_time:N.value||void 0,flight_time:O.value||void 0,shuttle_date:T.value?T.value.format("YYYY-MM-DD"):void 0,shuttle_time:f.value,return_shuttle_date:$.value?$.value.format("YYYY-MM-DD"):void 0,return_shuttle_time:j.value};try{const i=await $fetch("/api/POSTbooking",{method:"POST",body:o});if(console.log(i),i!=null&&i.id){const B=i.id[0].id;console.log("id check2:"+B);const S=M("/confirmationPage/"+B);Pe({path:S,query:{isSwapped:String(u.value)}})}}catch{alert(g("alertMessage4"))}}},q=r([]),he=r([]),de=r(!1);return Be(async()=>{if(!de.value)try{const t=await $fetch("/api/GETallOffdays");he.value=t.data,q.value=he.value.map(o=>({id:o.id,startOffDays:o.start_offDays,endOffDays:o.end_offDays,created_at:o.created_at,create_by:o.created_by})),de.value=!0}catch{alert("Fetch error")}}),(t,o)=>{const i=ye,B=Ae,S=Se,Y=Oe,V=Ce,ze=De,Ve=Ne,Ie=Le;return p(),_("div",ml,[e("div",null,[e("p",pl,l(t.$t("Booking.outward")),1)]),e("div",fl,[e("div",vl,[a(i,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",_l,l(t.$t("Booking.departure")),1)]),e("div",hl,[a(i,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",gl,l(t.$t("Booking.arrival")),1)])]),e("div",bl,[e("p",yl,l(u.value?Q.value.p2:K.value.p2),1),a(i,{name:"fa6-solid:rotate",class:F(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":u.value}]),onClick:be},null,8,["class"]),e("p",$l,l(u.value?Q.value.p3:K.value.p3),1)]),o[21]||(o[21]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",xl,[u.value?(p(),_("div",kl,[e("div",wl,[a(i,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",Hl,l(t.$t("Booking.flightNumber")),1)]),e("div",Bl,[L(e("input",{type:"text",placeholder:t.$t("Booking.required"),"onUpdate:modelValue":o[0]||(o[0]=m=>C.value=m),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,Tl),[[E,C.value]])])])):G("",!0),e("div",Pl,[a(i,{name:u.value?"i-material-symbols-flight-land":"i-majesticons-ship-line",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),u.value?(p(),_("p",Dl,l(t.$t("Booking.arrivalAtAirportTime")),1)):(p(),_("p",Ol,l(t.$t("Booking.arrivalPortTime")),1))])]),a(V,{locale:k(n)},{default:b(()=>[e("div",Cl,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:v.value,"onUpdate:value":o[1]||(o[1]=m=>v.value=m),"disabled-date":ie,"show-today":!1,onOpenChange:fe,inputReadOnly:!0},null,8,["value"])]),_:1}),a(Y,{value:P.value,"onUpdate:value":o[2]||(o[2]=m=>P.value=m),"value-format":"HH:mm","disabled-hours":me,"disabled-minutes":pe,"minute-step":u.value?5:30,"hour-step":1,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!v.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",Ml,[e("div",Ul,[e("div",Rl,[a(i,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",Yl,l(u.value?t.$t("Booking.ferryTime"):t.$t("Booking.flightTime")),1)]),e("div",null,[u.value?(p(),te(V,{key:0,locale:k(n)},{default:b(()=>[a(Y,{value:N.value,"onUpdate:value":o[3]||(o[3]=m=>N.value=m),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":X,"disabled-minutes":Z,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:ne,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(p(),te(V,{key:1,locale:k(n)},{default:b(()=>[a(Y,{value:O.value,"onUpdate:value":o[4]||(o[4]=m=>O.value=m),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":X,"disabled-minutes":Z,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:ve,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",jl,[a(i,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",Al,l(t.$t("Booking.shuttleBusTime")),1)]),a(V,{locale:k(n)},{default:b(()=>[e("div",Sl,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:T.value,"onUpdate:value":o[5]||(o[5]=m=>T.value=m),disabled:!0,"disabled-date":_e},null,8,["value"])]),_:1}),a(Y,{value:f.value,"onUpdate:value":o[6]||(o[6]=m=>f.value=m),"value-format":"HH:mm",disabled:!0,"minute-step":30,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),o[22]||(o[22]=e("div",{class:"border-b-2 py-3 border-dashed border-gray-500"},null,-1)),e("p",Ll,l(t.$t("Booking.return")),1),e("div",Nl,[e("div",zl,[a(i,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",Vl,l(t.$t("Booking.departure")),1)]),e("div",Il,[a(i,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",Wl,l(t.$t("Booking.arrival")),1)])]),e("div",ql,[e("p",Fl,l(u.value?K.value.p2:Q.value.p2),1),a(i,{name:"fa6-solid:rotate",class:F(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":u.value}]),onClick:be},null,8,["class"]),e("p",El,l(u.value?K.value.p3:Q.value.p3),1)]),o[23]||(o[23]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",Gl,[u.value?G("",!0):(p(),_("div",Jl,[e("div",Kl,[a(i,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",Ql,l(t.$t("Booking.flightNumber")),1)]),e("div",Xl,[L(e("input",{type:"text",placeholder:t.$t("Booking.required"),"onUpdate:modelValue":o[7]||(o[7]=m=>C.value=m),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,Zl),[[E,C.value]])])])),e("div",eo,[a(i,{name:u.value?"i-majesticons-ship-line":"i-material-symbols-flight-land",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),u.value?(p(),_("p",to,l(t.$t("Booking.arrivalPortTime")),1)):(p(),_("p",lo,l(t.$t("Booking.arrivalAtAirportTime")),1))])]),a(V,{locale:k(n)},{default:b(()=>[e("div",oo,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:w.value,"onUpdate:value":o[8]||(o[8]=m=>w.value=m),"disabled-date":ie,"show-today":!1,inputReadOnly:!0},null,8,["value"])]),_:1}),a(Y,{value:W.value,"onUpdate:value":o[9]||(o[9]=m=>W.value=m),"value-format":"HH:mm","disabled-hours":me,"disabled-minutes":pe,"minute-step":u.value?30:5,"hour-step":1,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!w.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",so,[e("div",ao,[e("div",no,[a(i,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",io,l(u.value?t.$t("Booking.flightTime"):t.$t("Booking.ferryTime")),1)]),e("div",null,[u.value?(p(),te(V,{key:0,locale:k(n)},{default:b(()=>[a(Y,{value:I.value,"onUpdate:value":o[10]||(o[10]=m=>I.value=m),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":X,"disabled-minutes":Z,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:ve,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(p(),te(V,{key:1,locale:k(n)},{default:b(()=>[a(Y,{value:x.value,"onUpdate:value":o[11]||(o[11]=m=>x.value=m),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":X,"disabled-minutes":Z,"hide-disabled-options":!0,"show-now":!1,disabled:!W.value,onOpenChange:ne,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",ro,[a(i,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",uo,l(t.$t("Booking.shuttleBusTime")),1)]),a(V,{locale:k(n)},{default:b(()=>[e("div",co,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:$.value,"onUpdate:value":o[12]||(o[12]=m=>$.value=m),disabled:!0,"disabled-date":re},null,8,["value"])]),_:1}),a(Y,{value:j.value,"onUpdate:value":o[13]||(o[13]=m=>j.value=m),"value-format":"HH:mm",disabled:!0,"minute-step":30,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),a(ze),e("div",mo,[e("div",po,[e("p",fo,l(t.$t("Booking.adultTicket")),1),e("div",vo,[e("button",{onClick:o[14]||(o[14]=m=>R("adult"))},[a(i,{name:"i-mdi-minus-circle-outline"})]),e("p",_o,l(A.value.adult),1),e("button",{onClick:o[15]||(o[15]=m=>H("adult"))},[a(i,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",ho,[e("div",go,[e("p",bo,l(t.$t("Booking.childTicket")),1),e("div",yo,[e("button",{onClick:o[16]||(o[16]=m=>R("child"))},[a(i,{name:"i-mdi-minus-circle-outline"})]),e("p",$o,l(A.value.child),1),e("button",{onClick:o[17]||(o[17]=m=>H("child"))},[a(i,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",xo,[e("p",ko,l(t.$t("Booking.ticketPrice")),1),e("p",wo,"NT$ "+l(k(ae))+l(t.$t("Booking.pricePerPerson")),1)]),e("div",Ho,[e("p",Bo,l(t.$t("Booking.contact")),1),L(e("input",{"onUpdate:modelValue":o[18]||(o[18]=m=>se.value=m),type:"text",placeholder:t.$t("Booking.required"),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,To),[[E,se.value]])]),e("div",Po,[e("p",Do,l(t.$t("Booking.phone")),1),L(e("input",{"onUpdate:modelValue":o[19]||(o[19]=m=>J.value=m),type:"text",placeholder:t.$t("Booking.required"),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,Oo),[[E,J.value]])]),e("div",Co,[L(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":o[20]||(o[20]=m=>U.value=m),class:"h-5 w-3 border-black rounded-full"},null,512),[[Te,U.value]]),e("label",Mo,l(t.$t("HomePage.readAgreement")),1),a(Ve)]),e("div",Uo,[a(Ie,{type:"primary",onClick:z,class:"w-2/3 rounded-lg !bg-lwm-400 text-white active:!bg-lime-700"},{default:b(()=>[$e(l(t.$t("HomePage.confirm")),1)]),_:1})])])}}}),Yo=ce({setup(){const d=r(!1),h=r(1),g=y=>{h.value=y},{t:M}=oe();return{t:M,activeTab:h,isChecked:d,showContent:g}}}),jo={class:"flex flex-col pb-16"},Ao={class:"shadow mt-6 mx-10 rounded-lg bg-gray-50"},So={class:"flex"},Lo={key:0},No={key:1};function zo(d,h,g,M,y,u){const v=ot,T=cl,w=Ro;return p(),_(xe,null,[a(v),e("div",jo,[e("div",Ao,[e("div",So,[e("div",{onClick:h[1]||(h[1]=$=>d.showContent(1)),class:F([{"bg-lwm-100 rounded-tl-lg text-white":d.activeTab===2},"flex-1 flex justify-center rounded-tl-lg transition-all duration-300 ease-in-out transform hover:scale-[1.01] active:scale-95 cursor-pointer"])},[e("button",{onClick:h[0]||(h[0]=$=>d.showContent(1)),class:F({" text-lwm-400 font-bold":d.activeTab===1})},l(d.$t("HomePage.oneWay")),3)],2),e("div",{onClick:h[3]||(h[3]=$=>d.showContent(2)),class:F([{"bg-lwm-100 rounded-tr-lg text-white":d.activeTab===1},"flex-1 flex justify-center rounded-tr-lg transition-all duration-300 ease-in-out transform hover:scale-[1.01] active:scale-95 cursor-pointer"])},[e("button",{onClick:h[2]||(h[2]=$=>d.showContent(2)),class:F({" text-lwm-400 font-bold":d.activeTab===2})},l(d.$t("HomePage.roundTrip")),3)],2)]),d.activeTab===1?(p(),_("div",Lo,[a(T)])):G("",!0),d.activeTab===2?(p(),_("div",No,[a(w)])):G("",!0)])])],64)}const Ko=ke(Yo,[["render",zo]]);export{Ko as default};
