import{_ as J,o as c,c as r,a as e,f as Y,u as K,n as _,F as f,r as y,b,y as v,t as a,C as Q,h as B,i as x,k as I,m as R,l as S}from"./FGqHIyQb.js";import F from"./CHcm3yoE.js";import{d as U}from"./D8ZMcQSb.js";const W={},X={class:"py-6 border-b bg-green-400 flex items-center"};function Z(C,m){return c(),r("header",X,m[0]||(m[0]=[e("h1",{class:"absolute left-1/2 transform-translate-x-1/2 text-xl font-bold capitalize"}," 金門通管理 ",-1)]))}const ee=J(W,[["render",Z]]),te={class:"border-t bg-white fixed inset-x-0 bottom-0"},se={class:"flex justify-between"},ae=["onClick"],ne=Y({__name:"ManagementBottom",setup(C){const m=K(),h=_("shuttle"),w=_("7"),O=[{name:"viewOrder",icon:"material-symbols-grid-view-outline-rounded",route:"/Management/"},{name:"checkUser",icon:"material-symbols-person-search-outline",route:"/Management/"},{name:"refundApprove",icon:"hugeicons-stamp-02",route:"/Management/"},{name:"offDaySetting",icon:"material-symbols-calendar-month-outline",route:"/Management/"}],o=(u,d,i)=>{h.value=u,u==="myTrip"&&i&&(d=`/myTrip/${i}`),u==="reschedulePage"&&i&&(d=`/reschedulePage/${i}`);const l=m(d);Q(l)};return(u,d)=>{const i=F;return c(),r("footer",te,[e("div",se,[(c(),r(f,null,y(O,l=>e("button",{key:l.name,onClick:P=>o(l.name,l.route,w.value),class:"flex flex-col items-center mx-auto text-sm"},[b(i,{name:l.icon,class:v(["h-5 w-5",h.value===l.name?"text-green-500":"text-gray-400"])},null,8,["name","class"]),e("span",{class:v(h.value===l.name?"text-green-500 font-bold":"text-gray-500")},a(u.$t(`Management.${l.name}`)),3)],8,ae)),64))])])}}}),le={class:""},oe={class:"flex w-full max-w-full overflow-hidden"},ce={class:"shadow-md flex"},re={class:"bg-stone-50 flex flex-col"},de=["onClick"],ie={class:"ml-1"},me={class:"flex flex-col w-full max-w-full"},ue={class:"flex flex-col"},_e={class:"pt-2 pl-4 bg-sky-50 flex justify-evenly items-center"},xe={class:"font-bold pb-2"},he={class:"bg-white px-4 py-2"},pe={class:"flex items-center border rounded-md w-1/3"},fe=["placeholder"],be={class:"flex flex-col"},ve={class:"overflow-x-auto w-full"},ge={class:"table-auto min-w-full border-collapse border border-green-400 mr-12"},ye={class:"bg-gray-100"},we={class:"border p-2 text-xs md:text-sm sticky left-0 bg-white z-10"},Oe={class:"border p-2 text-xs md:text-sm"},Me={class:"border p-2 text-xs md:text-sm"},$e={class:"border p-2 text-xs md:text-sm"},Ce={class:"border p-2 text-xs md:text-sm"},Pe={class:"border p-2 text-xs md:text-sm"},ke={class:"border p-2 text-xs md:text-sm"},De={class:"border p-2 text-xs md:text-sm"},Te={class:"border p-2 text-xs md:text-sm"},je={class:"border p-2 text-xs md:text-sm"},ze={class:"border p-2 text-xs md:text-sm"},Be={class:"border p-2 text-xs md:text-sm"},Ie={class:"flex justify-center items-center mt-4 space-x-4"},Se=["disabled"],Ye=["disabled"],$=5,Ae=Y({__name:"index",setup(C){const{t:m}=B(),h=B(),w=_(""),O=["訂單 ID","聯絡人","電話","上車地點","下車地點","日期","時間","狀態","成人票(人)","兒童票(人)","全票數","總價格"],o=_(1),u=x(()=>{const t=(o.value-1)*$;return k.value.slice(t,t+$)}),d=x(()=>Math.ceil(k.value.length/$)),i=()=>{o.value<d.value&&o.value++},l=()=>{o.value>1&&o.value--},P=t=>t?U(t).format("YYYY-MM-DD"):"N/A",k=x(()=>j.value.filter(t=>Object.values(t).some(n=>String(n).includes(w.value)))),N=t=>({"text-green-600 font-bold":t==="已完成","text-red-600 font-bold":t==="未出行","text-yellow-600 font-bold":t==="处理中"}),p=_("viewOrder"),V=[{name:"viewOrder",icon:"material-symbols-grid-view-outline-rounded"},{name:"printOrder",icon:"material-symbols-print-outline"},{name:"addOrder",icon:"material-symbols-add-diamond-outline"},{name:"deleteOrder",icon:"material-symbols-delete-outline"},{name:"editOrder",icon:"material-symbols-edit-square-outline"}],A={viewOrder:"Management.viewOrder",printOrder:"Management.printOrder",addOrder:"Management.addOrder",deleteOrder:"Management.deleteOrder",editOrder:"Management.editOrder"},D={printOrder:{text:"Management.print",class:"bg-blue-400"},addOrder:{text:"Management.add",class:"bg-green-500"},deleteOrder:{text:"Management.delete",class:"bg-red-500"},editOrder:{text:"Management.modify",class:"bg-yellow-400"}},E=x(()=>A[p.value]),T=x(()=>{var t;return((t=D[p.value])==null?void 0:t.text)??""}),H=x(()=>{var t;return((t=D[p.value])==null?void 0:t.class)??""}),j=_([]),M=_([]),L=async()=>{try{const t=await $fetch("/api/GETallOrders");M.value=t.data,j.value=M.value.map(n=>({id:n.id,departure_loc:n.departure_loc,destination_loc:n.destination_loc,shuttle_date:n.shuttle_date,shuttle_time:n.shuttle_time,status:n.status,adult_num:n.adult_num,child_num:n.child_num,totalTickets:n.total_tickets,totalprice:n.totalprice,contact:n.contact_name,phone:n.contact_phone})),console.log("check"+JSON.stringify(M.value))}catch{alert("Fetch error")}};return I(()=>{h.locale.value="zh-TW"}),I(L),(t,n)=>{const q=ee,z=F,G=ne;return c(),r(f,null,[b(q),e("div",le,[e("div",oe,[e("div",ce,[e("div",re,[(c(),r(f,null,y(V,s=>e("div",{key:s.name,onClick:g=>p.value=s.name,class:v(["flex flex-col py-4 items-center text-sm shadow-sm px-4 cursor-pointer transition-all duration-200",p.value===s.name?"text-lwm-500 font-bold bg-teal-50":"text-gray-500 hover:text-green-400"])},[b(z,{name:s.icon,class:"h-6 w-6"},null,8,["name"]),e("span",ie,a(t.$t(`Management.${s.name}`)),1)],10,de)),64))])]),e("div",me,[e("div",ue,[e("div",_e,[e("h2",xe,a(t.$t(E.value)),1),T.value?(c(),r("button",{key:0,class:v([H.value,"shadow-md rounded-xl px-2 mx-2 mb-2 text-white"])},a(t.$t(T.value)),3)):R("",!0)]),e("div",he,[e("div",pe,[b(z,{name:"material-symbols-search-rounded",class:"h-5 w-5 text-gray-500 mx-2"}),e("input",{type:"text",class:"py-1 w-full rounded-md focus:ring-0 focus:border-transparent border-none outline-none",placeholder:t.$t("Management.searchOrder")},null,8,fe)])])]),e("div",be,[e("div",ve,[e("table",ge,[e("thead",null,[e("tr",ye,[n[0]||(n[0]=e("th",{class:"border p-2 text-xs md:text-sm sticky left-0 bg-indigo-50 z-10"},"訂單ID",-1)),(c(!0),r(f,null,y(O.slice(1),(s,g)=>(c(),r("th",{key:g,class:"border p-2 text-xs md:text-sm bg-indigo-50"},a(s),1))),128))])]),e("tbody",null,[(c(!0),r(f,null,y(u.value,(s,g)=>(c(),r("tr",{key:g,class:"border-b"},[e("td",we,a(s.id),1),e("td",Oe,a(s.contact),1),e("td",Me,a(s.phone),1),e("td",$e,a(S(m)(`${s.departure_loc}`)),1),e("td",Ce,a(S(m)(`${s.destination_loc}`)),1),e("td",Pe,a(P(s.shuttle_date)),1),e("td",ke,a(s.shuttle_time),1),e("td",De,[e("span",{class:v(N(s.status))},a(s.status),3)]),e("td",Te,a(s.adult_num),1),e("td",je,a(s.child_num),1),e("td",ze,a(s.totalTickets),1),e("td",Be,a(s.totalprice),1)]))),128))])]),e("div",Ie,[e("button",{onClick:l,disabled:o.value===1,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," 上一頁 ",8,Se),e("span",null,"第 "+a(o.value)+" 頁 / 共 "+a(d.value)+" 頁",1),e("button",{onClick:i,disabled:o.value===d.value,class:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50"}," 下一頁 ",8,Ye)])])])])])]),b(G)],64)}}});export{Ae as default};
