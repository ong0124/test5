import{_ as _e}from"./Cp5_ovei.js";import pe from"./3eAMRj67.js";import{d as me,u as he,a as fe,n as L,r as c,p as i,q as ve,E as y,o as ge,b as _,c as p,e,f as n,t as s,j as F,k as a,i as N,B as A,F as K,w as g,v as q,C as G}from"./COLKi7M_.js";import{T as xe,C as be,l as W,b as ye}from"./BMvQVNhH.js";import{l as ke}from"./C-YZILys.js";import{D as we,S as Be}from"./D6Lb7Exx.js";const $e={class:"py-4 border-b bg-[url('/assets/images/headerTest3.png')] bg-cover bg-center flex items-center"},Te={class:"absolute left-1/2 transform -translate-x-1/2 text-xl text-white capitalize"},De={class:"flex bg-orange-100 pl-4 items-center h-8 overflow-hidden relative text-red-500"},Me={class:"marquee-container flex-1 overflow-hidden"},Re={class:"whitespace-nowrap animate-marquee"},Ce={class:"px-4"},Pe={class:"px-6 pt-4"},He={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2 border-dashed"},Ye={class:"border-l-4 border-orange-300 text-gray-500"},Ue={class:"mx-2 text-lg font-bold"},Fe={class:"text-gray-500"},Ne={class:"flex"},Ve={class:"flex-1 self-center"},Se={class:"text-end"},je={class:"flex-1 flex-col text-center"},Oe={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},ze={class:"text-sm"},Ee={class:"flex-1 self-center"},Ie={class:"grid grid-cols-2 pt-4"},Le={class:"flex-col text-start ml-14"},Ae={class:"flex-col text-start ml-5"},Ke={key:0},qe={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2"},Ge={class:"border-l-4 border-orange-300 text-gray-500"},We={class:"mx-2 text-lg font-bold"},Je={class:"text-gray-500"},Qe={class:"flex"},Xe={class:"flex-1 self-center"},Ze={class:"text-end"},et={class:"flex-1 flex-col text-center"},tt={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},st={class:"text-sm"},lt={class:"flex-1 self-center"},ot={class:"grid grid-cols-2 pt-4"},at={class:"flex-col text-start ml-14"},nt={class:"flex-col text-start ml-5"},rt={class:"px-6 pb-24"},it={class:"bg-white shadow-md rounded-b-xl overflow-hidden pt-5 pb-2 px-6 space-y-3"},dt={class:"text-xl font-semibold text-gray-800"},ut={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},ct={class:"font-medium text-gray-700"},_t={key:0,class:"text-blue-500"},pt={key:1},mt={class:"font-medium text-gray-700"},ht={key:0,class:"text-blue-500"},ft={key:1},vt={class:"border-l-4 border-lwm-300 items-center"},gt={class:"text-gray-500 font-semibold ml-1"},xt={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},bt={class:"font-medium text-gray-700"},yt={key:0,class:"text-blue-500"},kt={key:1},wt={class:"font-medium text-gray-700"},Bt={key:0,class:"text-blue-500"},$t={key:1},Tt={class:"flex items-center"},Dt={class:"text-gray-600 font-semibold mr-3"},Mt={class:"flex space-x-4"},Rt={class:"space-y-2"},Ct={class:"flex items-center"},Pt={class:"text-gray-600 font-semibold"},Ht={class:"flex space-x-4"},Yt={key:1,class:"space-y-2"},Ut={class:"flex items-center"},Ft={class:"text-gray-600 font-semibold"},Nt={class:"flex space-x-4"},Vt={class:"space-y-4"},St={class:"flex items-center space-x-4 ml-4"},jt={class:"text-gray-600 font-medium"},Ot=["placeholder"],zt={class:"flex items-center space-x-4"},Et={class:"text-gray-600 font-medium"},It=["placeholder"],Lt={class:"flex bg-white pt-1 rounded-b-lg mb-2"},At={class:"flex-1 border-r-2 border-t-2 rounded flex justify-center"},Kt={class:"flex-1 border-t-2 rounded flex justify-center"},es=me({__name:"[id]",setup(qt){const J=he(),V=fe(),{t:u}=L(),k=J.params.id,w=c(""),B=c(""),x=c(),h=c(""),b=c(),$=c(""),Q=c(""),X=c(""),S=i(()=>{const o=f.value.adult;return Math.min(o,2)*150+Math.max(o-2,0)*100});i(()=>S.value-Number(t.totalprice));const{locale:Z}=L(),r=c(!1),j=()=>{r.value=!r.value};c(""),c("");const ee={"zh-CN":ye,"zh-TW":W,"en-US":ke},T=i(()=>ee[Z.value]||W),O=o=>o&&o.isBefore(y().add(1,"day").startOf("day")),D=()=>Array.from({length:24},(o,l)=>l).filter(o=>o<8||o>18),M=o=>o===8?Array.from({length:60},(l,v)=>v).filter(l=>l<30):o===18?Array.from({length:60},(l,v)=>v).filter(l=>l>=1):[],te=i(()=>r.value?t.destination_loc:t.departure_loc),se=i(()=>r.value?t.departure_loc:t.destination_loc),le=i(()=>r.value?t.return_destination:t.return_departure),oe=i(()=>r.value?t.return_departure:t.return_destination),ae=async o=>{try{await $fetch("/api/DeleteBookingById/"+o,{method:"DELETE"}),alert(u("alertMessage5")),V.push("/")}catch{alert(u("alertMessage6"))}},ne=async()=>{try{const o={departure_loc:te.value,destination_loc:se.value,return_departure:le.value,return_destination:oe.value,shuttle_date:x.value?x.value.format("YYYY-MM-DD"):t.shuttle_date,shuttle_time:h.value||t.shuttle_time,return_shuttle_date:b.value?b.value.format("YYYY-MM-DD"):t.return_shuttle_date,return_shuttle_time:$.value||t.return_shuttle_time,ferry_time:Q.value||t.ferry_time,flight_time:X.value||t.flight_time,adult_num:f.value.adult||t.adult_num,child_num:f.value.child||t.child_num,contact_phone:w.value||t.contact_phone,contact_name:B.value||t.contact_name,totalprice:S.value||t.totalprice};await $fetch("/api/detailsUpdate/"+k,{method:"PUT",body:o}),alert(u("alertMessage7")),V.push("/")}catch(o){console.error("Update failed:",o),alert(u("alertMessage8"))}},t=ve({trip_type:"",LineID:"",adult_num:"",child_num:"",contact_phone:"",totalprice:"",contact_name:"",departure_loc:"",destination_loc:"",return_departure:"",return_destination:"",arrivalpoint_date:"",arrivalpoint_time:"",flight_num:"",ferry_time:"",flight_time:"",shuttle_date:y(),shuttle_time:"",return_shuttle_date:y(),return_shuttle_time:""}),R=i(()=>u(t.departure_loc||"defaultKey")),C=i(()=>u(t.destination_loc||"defaultKey")),P=i(()=>u(t.return_departure||"defaultKey")),H=i(()=>u(t.return_destination||"defaultKey")),re=async()=>{try{const l=(await $fetch(`/api/reschedulePage/details/${k}`)).data;Object.assign(t,{trip_type:l.trip_type,LineID:l.LineID,adult_num:l.adult_num,child_num:l.child_num,contact_phone:l.contact_phone,totalprice:l.totalprice,contact_name:l.contact_name,departure_loc:l.departure_loc,destination_loc:l.destination_loc,return_departure:l.return_departure,return_destination:l.return_destination,arrivalpoint_date:l.arrivalpoint_date,arrivalpoint_time:l.arrivalpoint_time,flight_num:l.flight_num,ferry_time:l.ferry_time,flight_time:l.flight_time,shuttle_date:l.shuttle_date,shuttle_time:l.shuttle_time,return_shuttle_date:l.return_shuttle_date,return_shuttle_time:l.return_shuttle_time}),f.value.adult=Number(t.adult_num)||0,f.value.child=Number(t.child_num)||0,console.log("form:",t)}catch(o){console.error("Error fetching booking:",o),alert("Get blog detail error")}},f=c({adult:0,child:0}),z=o=>o?y(o).format("YYYY-MM-DD"):"N/A",ie=i(()=>t.departure_loc==="Booking.pier"?t.flight_time:t.ferry_time),de=i(()=>t.departure_loc==="Booking.pier"?u("Booking.flightTime"):u("Booking.ferryTime")),ue=i(()=>t.return_departure==="Booking.pier"?t.flight_time:t.ferry_time),ce=i(()=>t.return_departure==="Booking.pier"?u("Booking.flightTime"):u("Booking.ferryTime"));return ge(re),(o,l)=>{const v=_e,m=pe,Y=xe,U=be,E=we,I=Be;return _(),p(K,null,[e("header",$e,[e("div",null,[n(v)]),e("h1",Te,s(o.$t("ReschedulePage.title")),1)]),e("div",De,[n(m,{name:"gg:danger",class:"bg-red-500 w-8 h-5 flex-shrink-0"}),F(" "+s(o.$t("announcementMessage"))+" "+s(":")+"  ",1),e("div",Me,[e("div",Re,[e("span",Ce,s(o.$t("ReschedulePage.message")),1)])])]),e("div",Pe,[e("div",He,[e("div",Ye,[e("p",Ue,s(o.$t("ReschedulePage.originalSchedule")),1)]),e("div",Fe,[e("div",Ne,[e("div",Ve,[e("p",Se,s(R.value),1)]),e("div",je,[e("div",Oe,[e("p",null,s(z(a(t).shuttle_date)),1)]),e("div",ze,[e("p",null,s(a(t).shuttle_time),1)])]),e("div",Ee,[e("p",null,s(C.value),1)])]),e("div",Ie,[e("div",Le,[e("p",null,s(de.value),1),e("p",null,s(o.$t("Booking.contact")),1),e("p",null,s(o.$t("Booking.phone")),1),e("p",null,s(o.$t("Booking.adultTicket")),1),e("p",null,s(o.$t("Booking.childTicket1")),1)]),e("div",Ae,[e("p",null,s(ie.value),1),e("p",null,s(a(t).contact_name),1),e("p",null,s(a(t).contact_phone),1),e("p",null,s(a(t).adult_num),1),e("p",null,s(a(t).child_num),1)])])])]),a(t).trip_type==="roundTrip"?(_(),p("div",Ke,[e("div",qe,[e("div",Ge,[e("p",We,s(o.$t("Booking.return")),1)]),e("div",Je,[e("div",Qe,[e("div",Xe,[e("p",Ze,s(P.value),1)]),e("div",et,[e("div",tt,[e("p",null,s(z(a(t).return_shuttle_date)),1)]),e("div",st,[e("p",null,s(a(t).return_shuttle_time),1)])]),e("div",lt,[e("p",null,s(H.value),1)])]),e("div",ot,[e("div",at,[e("p",null,s(ce.value),1),e("p",null,s(o.$t("Booking.contact")),1),e("p",null,s(o.$t("Booking.phone")),1),e("p",null,s(o.$t("Booking.adultTicket")),1),e("p",null,s(o.$t("Booking.childTicket1")),1)]),e("div",nt,[e("p",null,s(ue.value),1),e("p",null,s(a(t).contact_name),1),e("p",null,s(a(t).contact_phone),1),e("p",null,s(a(t).adult_num),1),e("p",null,s(a(t).child_num),1)])])])])])):N("",!0)]),e("div",rt,[e("div",it,[e("h2",dt,s(o.$t("ReschedulePage.newSchedule")),1),e("div",ut,[e("p",ct,[r.value?(_(),p("span",_t,s(C.value),1)):(_(),p("span",pt,s(R.value),1))]),n(m,{name:"fa6-solid:rotate",class:A(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:j},null,8,["class"]),e("p",mt,[r.value?(_(),p("span",ht,s(R.value),1)):(_(),p("span",ft,s(C.value),1))])]),a(t).trip_type==="roundTrip"?(_(),p(K,{key:0},[e("div",vt,[e("span",gt,s(o.$t("Booking.return"))+" : ",1)]),e("div",xt,[e("p",bt,[r.value?(_(),p("span",yt,s(H.value),1)):(_(),p("span",kt,s(P.value),1))]),n(m,{name:"fa6-solid:rotate",class:A(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:j},null,8,["class"]),e("p",wt,[r.value?(_(),p("span",Bt,s(P.value),1)):(_(),p("span",$t,s(H.value),1))])])],64)):N("",!0),e("div",Tt,[n(m,{name:"lucide:tickets",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Dt,s(o.$t("Booking.flightTime")),1),n(U,{locale:T.value},{default:g(()=>[e("div",Mt,[n(Y,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:h.value,"onUpdate:value":l[0]||(l[0]=d=>h.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),e("div",Rt,[e("div",Ct,[n(m,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Pt,s(o.$t("ReschedulePage.departureTime")),1)]),n(U,{locale:T.value},{default:g(()=>[e("div",Ht,[n(I,{direction:"vertical",size:12},{default:g(()=>[n(E,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":O,value:x.value,"onUpdate:value":l[1]||(l[1]=d=>x.value=d)},null,8,["value"])]),_:1}),n(Y,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:h.value,"onUpdate:value":l[2]||(l[2]=d=>h.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),a(t).trip_type==="roundTrip"?(_(),p("div",Yt,[e("div",Ut,[n(m,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-50 mr-1"}),e("p",Ft,s(o.$t("ReschedulePage.returnDepartureTime")),1)]),n(U,{locale:T.value},{default:g(()=>[e("div",Nt,[n(I,{direction:"vertical",size:12},{default:g(()=>[n(E,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":O,value:b.value,"onUpdate:value":l[3]||(l[3]=d=>b.value=d)},null,8,["value"])]),_:1}),n(Y,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:$.value,"onUpdate:value":l[4]||(l[4]=d=>$.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])])):N("",!0),e("div",Vt,[e("div",St,[e("p",jt,[l[8]||(l[8]=e("span",{class:"text-2xl text-red-500"},"*",-1)),F(s(o.$t("Booking.contact")),1)]),q(e("input",{type:"text",placeholder:a(t).contact_name,"onUpdate:modelValue":l[5]||(l[5]=d=>B.value=d),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,Ot),[[G,B.value]])]),e("div",zt,[e("p",Et,[l[9]||(l[9]=e("span",{class:"text-2xl text-red-500"},"*",-1)),F(s(o.$t("Booking.phone")),1)]),q(e("input",{type:"text",placeholder:a(t).contact_phone,"onUpdate:modelValue":l[6]||(l[6]=d=>w.value=d),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,It),[[G,w.value]])])]),e("div",Lt,[e("div",At,[e("button",{onClick:ne,class:"text-blue-400 py-2 rounded hover:text-blue-500 transition"},s(o.$t("ReschedulePage.confirmReschedule")),1)]),e("div",Kt,[e("button",{onClick:l[7]||(l[7]=()=>ae(a(k))),class:"text-red-500 py-2 rounded hover:text-red-600 transition"},s(o.$t("cancelOrder")),1)])])])])],64)}}});export{es as default};
