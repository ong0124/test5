import{_ as _e}from"./BKA84gmY.js";import pe from"./B1RR3g5D.js";import{f as me,D as he,Y as fe,h as K,n as c,i,j as ve,k as ge,o as _,c as p,a as e,b as n,t as s,e as F,l as a,m as N,y as I,F as L,w as g,p as q,z as G}from"./FI-vig1w.js";import{d as y}from"./D8ZMcQSb.js";import{T as xe,C as be,l as W,b as ye}from"./L593wYGP.js";import{l as ke}from"./BWtundMI.js";import{D as we,S as Be}from"./CC6r0gnu.js";const $e={class:"py-4 border-b bg-[url('/assets/images/headerTest3.png')] bg-cover bg-center flex items-center"},Te={class:"absolute left-1/2 transform -translate-x-1/2 text-xl text-white capitalize"},De={class:"flex bg-orange-100 pl-4 items-center h-8 overflow-hidden relative text-red-500"},Me={class:"marquee-container flex-1 overflow-hidden"},Re={class:"whitespace-nowrap animate-marquee"},Pe={class:"px-4"},Ye={class:"px-6 pt-4"},Ce={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2 border-dashed"},He={class:"border-l-4 border-orange-300 text-gray-500"},Ue={class:"mx-2 text-lg font-bold"},Fe={class:"text-gray-500"},Ne={class:"flex"},Ve={class:"flex-1 self-center"},Se={class:"text-end"},je={class:"flex-1 flex-col text-center"},ze={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},Oe={class:"text-sm"},Ee={class:"flex-1 self-center"},Ae={class:"grid grid-cols-2 pt-4"},Ke={class:"flex-col text-start ml-14"},Ie={class:"flex-col text-start ml-5"},Le={key:0},qe={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2"},Ge={class:"border-l-4 border-orange-300 text-gray-500"},We={class:"mx-2 text-lg font-bold"},Je={class:"text-gray-500"},Qe={class:"flex"},Xe={class:"flex-1 self-center"},Ze={class:"text-end"},et={class:"flex-1 flex-col text-center"},tt={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},st={class:"text-sm"},ot={class:"flex-1 self-center"},lt={class:"grid grid-cols-2 pt-4"},at={class:"flex-col text-start ml-14"},nt={class:"flex-col text-start ml-5"},rt={class:"px-6 pb-24"},it={class:"bg-white shadow-md rounded-b-xl overflow-hidden pt-5 pb-2 px-6 space-y-3"},dt={class:"text-xl font-semibold text-gray-800"},ut={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},ct={class:"font-medium text-gray-700"},_t={key:0,class:"text-blue-500"},pt={key:1},mt={class:"font-medium text-gray-700"},ht={key:0,class:"text-blue-500"},ft={key:1},vt={class:"border-l-4 border-lwm-300 items-center"},gt={class:"text-gray-500 font-semibold ml-1"},xt={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},bt={class:"font-medium text-gray-700"},yt={key:0,class:"text-blue-500"},kt={key:1},wt={class:"font-medium text-gray-700"},Bt={key:0,class:"text-blue-500"},$t={key:1},Tt={class:"flex items-center"},Dt={class:"text-gray-600 font-semibold mr-3"},Mt={class:"flex space-x-4"},Rt={class:"space-y-2"},Pt={class:"flex items-center"},Yt={class:"text-gray-600 font-semibold"},Ct={class:"flex space-x-4"},Ht={key:1,class:"space-y-2"},Ut={class:"flex items-center"},Ft={class:"text-gray-600 font-semibold"},Nt={class:"flex space-x-4"},Vt={class:"space-y-4"},St={class:"flex items-center space-x-4 ml-4"},jt={class:"text-gray-600 font-medium"},zt=["placeholder"],Ot={class:"flex items-center space-x-4"},Et={class:"text-gray-600 font-medium"},At=["placeholder"],Kt={class:"flex bg-white pt-1 rounded-b-lg mb-2"},It={class:"flex-1 border-r-2 border-t-2 rounded flex justify-center"},Lt={class:"flex-1 border-t-2 rounded flex justify-center"},ts=me({__name:"[id]",setup(qt){const J=he(),V=fe(),{t:u}=K(),k=J.params.id,w=c(""),B=c(""),x=c(),h=c(""),b=c(),$=c(""),Q=c(""),X=c(""),S=i(()=>{const l=f.value.adult;return Math.min(l,2)*150+Math.max(l-2,0)*100});i(()=>S.value-Number(t.totalprice));const{locale:Z}=K(),r=c(!1),j=()=>{r.value=!r.value};c(""),c("");const ee={"zh-CN":ye,"zh-TW":W,"en-US":ke},T=i(()=>ee[Z.value]||W),z=l=>l&&l.isBefore(y().add(1,"day").startOf("day")),D=()=>Array.from({length:24},(l,o)=>o).filter(l=>l<8||l>18),M=l=>l===8?Array.from({length:60},(o,v)=>v).filter(o=>o<30):l===18?Array.from({length:60},(o,v)=>v).filter(o=>o>=1):[],te=i(()=>r.value?t.destination_loc:t.departure_loc),se=i(()=>r.value?t.departure_loc:t.destination_loc),oe=i(()=>r.value?t.return_destination:t.return_departure),le=i(()=>r.value?t.return_departure:t.return_destination),ae=async l=>{try{await $fetch("/api/DeleteBookingById/"+l,{method:"DELETE"}),alert(u("alertMessage5")),V.push("/")}catch{alert(u("alertMessage6"))}},ne=async()=>{try{const l={departure_loc:te.value,destination_loc:se.value,return_departure:oe.value,return_destination:le.value,shuttle_date:x.value?x.value.format("YYYY-MM-DD"):t.shuttle_date,shuttle_time:h.value||t.shuttle_time,return_shuttle_date:b.value?b.value.format("YYYY-MM-DD"):t.return_shuttle_date,return_shuttle_time:$.value||t.return_shuttle_time,ferry_time:Q.value||t.ferry_time,flight_time:X.value||t.flight_time,adult_num:f.value.adult||t.adult_num,child_num:f.value.child||t.child_num,contact_phone:w.value||t.contact_phone,contact_name:B.value||t.contact_name,totalprice:S.value||t.totalprice};await $fetch("/api/detailsUpdate/"+k,{method:"PUT",body:l}),alert(u("alertMessage7")),V.push("/")}catch(l){console.error("Update failed:",l),alert(u("alertMessage8"))}},t=ve({trip_type:"",user_id:"",adult_num:"",child_num:"",contact_phone:"",totalprice:"",contact_name:"",departure_loc:"",destination_loc:"",return_departure:"",return_destination:"",arrivalpoint_date:"",arrivalpoint_time:"",flight_num:"",ferry_time:"",flight_time:"",shuttle_date:y(),shuttle_time:"",return_shuttle_date:y(),return_shuttle_time:""}),R=i(()=>u(t.departure_loc||"defaultKey")),P=i(()=>u(t.destination_loc||"defaultKey")),Y=i(()=>u(t.return_departure||"defaultKey")),C=i(()=>u(t.return_destination||"defaultKey")),re=async()=>{try{const o=(await $fetch(`/api/reschedulePage/details/${k}`)).data;Object.assign(t,{trip_type:o.trip_type,user_id:o.user_id,adult_num:o.adult_num,child_num:o.child_num,contact_phone:o.contact_phone,totalprice:o.totalprice,contact_name:o.contact_name,departure_loc:o.departure_loc,destination_loc:o.destination_loc,return_departure:o.return_departure,return_destination:o.return_destination,arrivalpoint_date:o.arrivalpoint_date,arrivalpoint_time:o.arrivalpoint_time,flight_num:o.flight_num,ferry_time:o.ferry_time,flight_time:o.flight_time,shuttle_date:o.shuttle_date,shuttle_time:o.shuttle_time,return_shuttle_date:o.return_shuttle_date,return_shuttle_time:o.return_shuttle_time}),f.value.adult=Number(t.adult_num)||0,f.value.child=Number(t.child_num)||0,console.log("form:",t)}catch(l){console.error("Error fetching booking:",l),alert("Get blog detail error")}},f=c({adult:0,child:0}),O=l=>l?y(l).format("YYYY-MM-DD"):"N/A",ie=i(()=>t.departure_loc==="Booking.pier"?t.flight_time:t.ferry_time),de=i(()=>t.departure_loc==="Booking.pier"?u("Booking.flightTime"):u("Booking.ferryTime")),ue=i(()=>t.return_departure==="Booking.pier"?t.flight_time:t.ferry_time),ce=i(()=>t.return_departure==="Booking.pier"?u("Booking.flightTime"):u("Booking.ferryTime"));return ge(re),(l,o)=>{const v=_e,m=pe,H=xe,U=be,E=we,A=Be;return _(),p(L,null,[e("header",$e,[e("div",null,[n(v)]),e("h1",Te,s(l.$t("ReschedulePage.title")),1)]),e("div",De,[n(m,{name:"gg:danger",class:"bg-red-500 w-8 h-5 flex-shrink-0"}),F(" "+s(l.$t("announcementMessage"))+" "+s(":")+"  ",1),e("div",Me,[e("div",Re,[e("span",Pe,s(l.$t("ReschedulePage.message")),1)])])]),e("div",Ye,[e("div",Ce,[e("div",He,[e("p",Ue,s(l.$t("ReschedulePage.originalSchedule")),1)]),e("div",Fe,[e("div",Ne,[e("div",Ve,[e("p",Se,s(R.value),1)]),e("div",je,[e("div",ze,[e("p",null,s(O(a(t).shuttle_date)),1)]),e("div",Oe,[e("p",null,s(a(t).shuttle_time),1)])]),e("div",Ee,[e("p",null,s(P.value),1)])]),e("div",Ae,[e("div",Ke,[e("p",null,s(de.value),1),e("p",null,s(l.$t("Booking.contact")),1),e("p",null,s(l.$t("Booking.phone")),1),e("p",null,s(l.$t("Booking.adultTicket")),1),e("p",null,s(l.$t("Booking.childTicket1")),1)]),e("div",Ie,[e("p",null,s(ie.value),1),e("p",null,s(a(t).contact_name),1),e("p",null,s(a(t).contact_phone),1),e("p",null,s(a(t).adult_num),1),e("p",null,s(a(t).child_num),1)])])])]),a(t).trip_type==="roundTrip"?(_(),p("div",Le,[e("div",qe,[e("div",Ge,[e("p",We,s(l.$t("Booking.return")),1)]),e("div",Je,[e("div",Qe,[e("div",Xe,[e("p",Ze,s(Y.value),1)]),e("div",et,[e("div",tt,[e("p",null,s(O(a(t).return_shuttle_date)),1)]),e("div",st,[e("p",null,s(a(t).return_shuttle_time),1)])]),e("div",ot,[e("p",null,s(C.value),1)])]),e("div",lt,[e("div",at,[e("p",null,s(ce.value),1),e("p",null,s(l.$t("Booking.contact")),1),e("p",null,s(l.$t("Booking.phone")),1),e("p",null,s(l.$t("Booking.adultTicket")),1),e("p",null,s(l.$t("Booking.childTicket1")),1)]),e("div",nt,[e("p",null,s(ue.value),1),e("p",null,s(a(t).contact_name),1),e("p",null,s(a(t).contact_phone),1),e("p",null,s(a(t).adult_num),1),e("p",null,s(a(t).child_num),1)])])])])])):N("",!0)]),e("div",rt,[e("div",it,[e("h2",dt,s(l.$t("ReschedulePage.newSchedule")),1),e("div",ut,[e("p",ct,[r.value?(_(),p("span",_t,s(P.value),1)):(_(),p("span",pt,s(R.value),1))]),n(m,{name:"fa6-solid:rotate",class:I(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:j},null,8,["class"]),e("p",mt,[r.value?(_(),p("span",ht,s(R.value),1)):(_(),p("span",ft,s(P.value),1))])]),a(t).trip_type==="roundTrip"?(_(),p(L,{key:0},[e("div",vt,[e("span",gt,s(l.$t("Booking.return"))+" : ",1)]),e("div",xt,[e("p",bt,[r.value?(_(),p("span",yt,s(C.value),1)):(_(),p("span",kt,s(Y.value),1))]),n(m,{name:"fa6-solid:rotate",class:I(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:j},null,8,["class"]),e("p",wt,[r.value?(_(),p("span",Bt,s(Y.value),1)):(_(),p("span",$t,s(C.value),1))])])],64)):N("",!0),e("div",Tt,[n(m,{name:"lucide:tickets",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Dt,s(l.$t("Booking.flightTime")),1),n(U,{locale:T.value},{default:g(()=>[e("div",Mt,[n(H,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:h.value,"onUpdate:value":o[0]||(o[0]=d=>h.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),e("div",Rt,[e("div",Pt,[n(m,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Yt,s(l.$t("ReschedulePage.departureTime")),1)]),n(U,{locale:T.value},{default:g(()=>[e("div",Ct,[n(A,{direction:"vertical",size:12},{default:g(()=>[n(E,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":z,value:x.value,"onUpdate:value":o[1]||(o[1]=d=>x.value=d)},null,8,["value"])]),_:1}),n(H,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:h.value,"onUpdate:value":o[2]||(o[2]=d=>h.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),a(t).trip_type==="roundTrip"?(_(),p("div",Ht,[e("div",Ut,[n(m,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-50 mr-1"}),e("p",Ft,s(l.$t("ReschedulePage.returnDepartureTime")),1)]),n(U,{locale:T.value},{default:g(()=>[e("div",Nt,[n(A,{direction:"vertical",size:12},{default:g(()=>[n(E,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":z,value:b.value,"onUpdate:value":o[3]||(o[3]=d=>b.value=d)},null,8,["value"])]),_:1}),n(H,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":D,"disabled-minutes":M,"hide-disabled-options":!0,"show-now":!1,value:$.value,"onUpdate:value":o[4]||(o[4]=d=>$.value=d)},null,8,["minute-step","value"])])]),_:1},8,["locale"])])):N("",!0),e("div",Vt,[e("div",St,[e("p",jt,[o[8]||(o[8]=e("span",{class:"text-2xl text-red-500"},"*",-1)),F(s(l.$t("Booking.contact")),1)]),q(e("input",{type:"text",placeholder:a(t).contact_name,"onUpdate:modelValue":o[5]||(o[5]=d=>B.value=d),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,zt),[[G,B.value]])]),e("div",Ot,[e("p",Et,[o[9]||(o[9]=e("span",{class:"text-2xl text-red-500"},"*",-1)),F(s(l.$t("Booking.phone")),1)]),q(e("input",{type:"text",placeholder:a(t).contact_phone,"onUpdate:modelValue":o[6]||(o[6]=d=>w.value=d),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,At),[[G,w.value]])])]),e("div",Kt,[e("div",It,[e("button",{onClick:ne,class:"text-blue-400 py-2 rounded hover:text-blue-500 transition"},s(l.$t("ReschedulePage.confirmReschedule")),1)]),e("div",Lt,[e("button",{onClick:o[7]||(o[7]=()=>ae(a(k))),class:"text-red-500 py-2 rounded hover:text-red-600 transition"},s(l.$t("cancelOrder")),1)])])])])],64)}}});export{ts as default};
