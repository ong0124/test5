import ye from"./k0Qb5h3r.js";import{d as ue,n as oe,p as de,r,b as m,c as h,e,f as a,j as xe,t as s,k,F as $e,g as Ie,v as A,x as qe,y as We,i as K,s as He,z as Fe,l as Be,A as ee,o as Te,B as E,C as G,D as Ee,E as Ge,w as b,h as te,G as Pe,H as D,I as De}from"./TF_FzlX4.js";import{_ as Oe}from"./D1_UtJ5j.js";import{l as ge,a as le,T as Me,C as Ue,b as Ce,c as Re}from"./D--oByoY.js";import{l as Ae}from"./BuRbj9iu.js";import{l as be}from"./CUJ2gW8I.js";import{D as Se,S as Ye,B as je}from"./BiPw5UQd.js";import"./Bx7J-uke.js";const Ke={class:"relative"},Qe={key:0,class:"absolute bg-white text-black rounded-md shadow-lg mt-2 z-10"},Ze=["id","value"],Je=["for"],Xe=ue({__name:"LangSwitcher",setup(p){const{locales:y,locale:g,setLocale:U}=oe(),v=de({get:()=>g.value,set:x=>{U(x)}}),d=r(!1),_=()=>{d.value=!d.value},T=x=>{v.value=x,d.value=!1};return(x,O)=>{const P=ye;return m(),h("div",Ke,[e("button",{class:"flex items-center border-2 bg-lwm-100 border-white rounded-3xl text-white px-2",onClick:_},[a(P,{name:"tabler-arrows-exchange",class:"mr-1"}),xe(" "+s(k(v)),1)]),k(d)?(m(),h("ul",Qe,[(m(!0),h($e,null,Ie(k(y),f=>(m(),h("li",{key:typeof f=="object"?f.code:f,class:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-100"},[A(e("input",{type:"radio",id:typeof f=="object"?f.code:f,value:typeof f=="object"?f.code:f,"onUpdate:modelValue":O[0]||(O[0]=C=>We(v)?v.value=C:null),onChange:O[1]||(O[1]=C=>T(k(v))),class:"mr-2"},null,40,Ze),[[qe,k(v)]]),e("label",{for:typeof f=="object"?f.code:f,class:"cursor-pointer"},s(typeof f=="object"?f.name:f),9,Je)]))),128))])):K("",!0)])}}}),et={},tt={class:"py-4 border-b bg-[url('/assets/images/headerTest2.png')] bg-cover bg-center flex items-center"},lt={class:"absolute left-1/2 transform -translate-x-1/2 text-xl text-white capitalize"};function ot(p,y){const g=Xe;return m(),h("header",tt,[e("div",null,[a(g,{class:"pl-4"})]),e("h1",lt,s(p.$t("title")),1)])}const st=He(et,[["render",ot]]),at=ue({name:"TermsPopup",setup(){return{showPopup:r(!1)}}}),nt={class:"flex"},it={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10"},rt={class:"bg-white p-6 rounded-lg shadow-lg max-w-sm"},dt={class:"text-lg font-bold mb-4"},ut={class:"text-xs text-gray-700"},ct={class:"text-base font-medium"},mt={class:"text-base font-medium"},pt={class:"text-base font-medium"};function ft(p,y,g,U,v,d){return m(),h("div",nt,[e("a",{href:"#",class:"text-sm text-blue-700 ml-1",onClick:y[0]||(y[0]=Fe(_=>p.showPopup=!0,["prevent"]))},s(p.$t("HomePage.terms")),1),p.showPopup?(m(),h("div",it,[e("div",rt,[e("h2",dt,s(p.$t("HomePage.terms")),1),e("div",ut,[e("p",ct,s(p.$t("PopUpRules.title1")),1),e("p",null,s(p.$t("PopUpRules.general_ticket")),1),e("p",null,s(p.$t("PopUpRules.infant_ticket")),1),e("p",mt,s(p.$t("PopUpRules.title2")),1),e("p",null,s(p.$t("PopUpRules.notice")),1),e("p",null,s(p.$t("PopUpRules.real_info")),1),e("p",null,s(p.$t("PopUpRules.online_deadline")),1),e("p",null,s(p.$t("PopUpRules.refund_deadline")),1),e("p",null,s(p.$t("PopUpRules.ticket_validity")),1),e("p",null,s(p.$t("PopUpRules.contact")),1),e("p",pt,s(p.$t("PopUpRules.title3")),1),e("p",null,s(p.$t("PopUpRules.process")),1),e("p",null,s(p.$t("PopUpRules.safety")),1),e("p",null,s(p.$t("PopUpRules.valuables")),1),e("p",null,s(p.$t("PopUpRules.insurance")),1),e("p",null,s(p.$t("PopUpRules.invoice")),1)]),e("button",{class:"mt-4 px-4 py-2 bg-lwm-400 text-white rounded hover:bg-green-700",onClick:y[1]||(y[1]=_=>p.showPopup=!1)},s(p.$t("okButton")),1)])])):K("",!0)])}const Ne=He(at,[["render",ft]]),vt={class:"flex-col p-4"},_t={class:"border-l-4 my-3 border-lwm-400 text-justify pl-2"},ht={class:"flex justify-around"},gt={class:"flex"},bt={class:"flex-1 text-gray-500 ml-2"},yt={class:"flex"},xt={class:"flex-1 text-gray-500 ml-2"},$t={class:"flex justify-evenly"},kt={key:0,class:"ml-auto text-2xl"},wt={key:1,class:"ml-auto text-2xl"},Ht={key:2,class:"mr-auto text-2xl"},Bt={key:3,class:"mr-auto text-2xl"},Tt={class:"flex flex-col pt-3 pl-4"},Pt={key:0,class:"flex pb-1"},Dt={class:"flex flex-col"},Ot={class:"flex"},Mt={class:"text-lwm-500"},Ut={class:"border rounded-lg mr-2"},Ct=["placeholder"],Rt={class:"flex flex-col"},At={class:"flex pr-4"},St={class:"text-lwm-500"},Yt={class:"border rounded-lg"},jt={disabled:"",value:""},Nt={class:"flex"},Lt={key:0,class:"text-lwm-500"},Vt={key:1,class:"text-lwm-500"},zt={class:"flex pt-2 pl-4 space-x-4"},It={class:"flex flex-col py-2 pl-4"},qt={class:"flex items-center"},Wt={class:"flex pr-4"},Ft={class:"text-lwm-500"},Et={class:"flex pl-4"},Gt={class:"text-lwm-500"},Kt={class:"flex pt-2 pl-4 space-x-4"},Qt={class:"flex pl-6 pt-2 justify-evenly content-center"},Zt={class:"flex flex-1"},Jt={class:"flex-1"},Xt={class:"flex-1 flex"},el={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},tl={class:"flex pl-6 pt-2 justify-evenly content-center"},ll={class:"flex flex-1"},ol={class:"flex-1"},sl={class:"flex-1 flex"},al={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},nl={class:"flex pl-6 pt-3 justify-evenly content-center"},il={class:"flex-1"},rl={class:"flex-1"},dl={class:"flex py-4 px-6 content-center"},ul={class:"flex-none pr-6"},cl=["placeholder"],ml={class:"flex py-4 px-6 content-center"},pl={class:"flex-none pr-2"},fl=["placeholder"],vl={class:"flex justify-center"},_l={for:"checkbox",class:"ml-2 text-sm text-gray-700"},hl={class:"pt-1 flex justify-center pb-4"},gl=ue({__name:"OneWayTicket",setup(p){const{locale:y}=oe(),g=Be(),U=r(!1),v=r(),d=r(),_=r(""),T=r(""),x=r(""),O=r(""),P=r(""),f=r(""),C=r(""),M=r({adult:1,child:1}),Y=r("oneWay"),I=de(()=>{const o=M.value.adult;return Math.min(o,2)*150+Math.max(o-2,0)*100}),$=r(!1),L=r(""),q={"zh-CN":Ce,"zh-TW":ge,"en-US":Ae},V=de(()=>q[y.value]||ge),{t:w}=oe(),se=()=>Array.from({length:24},(o,n)=>n).filter(o=>o<8||o>18),ae=o=>o===8?Array.from({length:60},(n,u)=>u).filter(n=>n<30):o===18?Array.from({length:60},(n,u)=>u).filter(n=>n>=1):[],ne=()=>{const o=D(f.value,"HH:mm").hour();return Array.from({length:24},(n,u)=>u).filter(n=>n<o||n>18)},W=o=>{const n=D(f.value,"HH:mm").minute();return o===8?Array.from({length:60},(u,H)=>H).filter(u=>u<30):o===19?Array.from({length:60},(u,H)=>H).filter(u=>u>=1):Array.from({length:60},(u,H)=>H).filter(u=>u<n)};ee(_,o=>{if(o){const n=D(o,"HH:mm").add(30,"minute"),u=D(o,"HH:mm").add(90,"minute");P.value=u.format("HH:mm"),f.value=u.format("HH:mm"),T.value=n.format("HH:mm")}else T.value="",f.value="",P.value=""});const Q=o=>{Re.open({message:w("HomePage.notification.title"),description:w("HomePage.notification.description"),placement:o})},ce=o=>{o&&le.info(w("alertMessage2"))},me=o=>{o&&le.info(w("alertMessage3"))},Z=o=>{o&&le.info(w("alertMessage"))};ee(v,o=>{o?(d.value=o,_.value=""):(d.value=void 0,_.value="")});const J=()=>{$.value=!$.value},pe=o=>{if(!X.value)return!0;const n=o&&o.isBefore(D().add(1,"day").startOf("day")),u=_e.value.some(H=>{const j=D(H.startOffDays),N=H.endOffDays?D(H.endOffDays):j;return o.isSameOrAfter(j,"day")&&o.isSameOrBefore(N,"day")});return n||u},fe=o=>{M.value[o]++},ie=o=>{M.value[o]>0&&M.value[o]--},ve=async()=>{if(!U.value)Q("bottom");else{let o=await be();if((!o||!o.user_id)&&(alert(w("alertMessage13")),o=await be(),!o)){console.log("登入失敗");return}const n={trip_type:Y.value,LineID:o.user_id,adult_num:M.value.adult,child_num:M.value.child,contact_phone:x.value,totalprice:I.value,contact_name:C.value,departure_loc:$.value?"Booking.airport":"Booking.pier",destination_loc:$.value?"Booking.pier":"Booking.airport",return_departure:void 0,return_destination:void 0,arrivalpoint_date:v.value?v.value.format("YYYY-MM-DD"):void 0,arrivalpoint_time:_.value,return_arrival_date:void 0,return_arrival_time:void 0,flight_num:O.value||void 0,ferry_time:f.value||void 0,flight_time:P.value||void 0,shuttle_date:d.value?d.value.format("YYYY-MM-DD"):void 0,shuttle_time:T.value,return_shuttle_date:void 0,return_shuttle_time:void 0};try{const u=await $fetch("/api/POSTbooking",{method:"POST",body:n});if(u!=null&&u.id){const H=u.id[0].id,j=g("/confirmationPage/"+H);De({path:j,query:{isSwapped:String($.value)}})}}catch{alert(w("alertMessage4"))}}},_e=r([]),he=r([]),X=r(!1);return Te(async()=>{if(!X.value)try{const o=await $fetch("/api/GETallOffdays");he.value=o.data,_e.value=he.value.map(n=>({id:n.id,startOffDays:n.start_offDays,endOffDays:n.end_offDays,created_at:n.created_at,create_by:n.created_by})),X.value=!0}catch{alert(w("alertMessage15"))}}),(o,n)=>{const u=ye,H=Se,j=Ye,N=Me,F=Ue,re=Oe,we=Ne,l=je;return m(),h($e,null,[e("div",vt,[e("p",_t,s(o.$t("HomePage.oneWay")),1),e("div",ht,[e("div",gt,[a(u,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",bt,s(o.$t("Booking.departure")),1)]),e("div",yt,[a(u,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",xt,s(o.$t("Booking.arrival")),1)])]),e("div",$t,[$.value?(m(),h("p",kt,s(o.$t("Booking.airport")),1)):(m(),h("p",wt,s(o.$t("Booking.pier")),1)),a(u,{name:"fa6-solid:rotate",class:E(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":$.value}]),onClick:J},null,8,["class"]),$.value?(m(),h("p",Ht,s(o.$t("Booking.pier")),1)):(m(),h("p",Bt,s(o.$t("Booking.airport")),1))]),n[16]||(n[16]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",Tt,[$.value?(m(),h("div",Pt,[e("div",Dt,[e("div",Ot,[a(u,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",Mt,s(o.$t("Booking.flightNumber")),1)]),e("div",Ut,[A(e("input",{type:"text",placeholder:o.$t("Booking.required"),"onUpdate:modelValue":n[0]||(n[0]=t=>O.value=t),class:"px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,Ct),[[G,O.value]])])]),e("div",Rt,[e("div",At,[a(u,{name:"uil-plane-departure",class:"bg-lwm-50 w-6 h-6"}),e("p",St,s(o.$t("Booking.flightDeparture")),1)]),e("div",Yt,[A(e("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>L.value=t),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},[e("option",jt,s(o.$t("Booking.required")),1),n[15]||(n[15]=Ge('<option value="TSA">松山 (TSA)</option><option value="RMQ">台中 (RMQ)</option><option value="CYI">嘉義 (CYI)</option><option value="TNN">台南 (TNN)</option><option value="KHH">高雄 (KHH)</option><option value="MZG">澎湖 (MZG)</option>',6))],512),[[Ee,L.value]])])])])):K("",!0),e("div",Nt,[a(u,{name:$.value?"i-material-symbols-flight-land":"i-majesticons-ship-line",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),$.value?(m(),h("p",Lt,s(o.$t("Booking.arrivalAtAirportTime")),1)):(m(),h("p",Vt,s(o.$t("Booking.arrivalPortTime")),1))])]),a(F,{locale:k(V)},{default:b(()=>[e("div",zt,[a(j,{direction:"vertical",size:12},{default:b(()=>[a(H,{value:v.value,"onUpdate:value":n[2]||(n[2]=t=>v.value=t),"disabled-date":pe,"show-today":!1,onOpenChange:ce,inputReadOnly:!0},null,8,["value"])]),_:1}),a(N,{value:_.value,"onUpdate:value":n[3]||(n[3]=t=>_.value=t),"value-format":"HH:mm","minute-step":$.value?5:30,"hour-step":1,"disabled-hours":se,"disabled-minutes":ae,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!v.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",It,[e("div",qt,[e("div",Wt,[a(u,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",Ft,s($.value?o.$t("Booking.ferryTime"):o.$t("Booking.flightTime")),1)]),e("div",null,[$.value?(m(),te(F,{key:0,locale:k(V)},{default:b(()=>[a(N,{value:f.value,"onUpdate:value":n[4]||(n[4]=t=>f.value=t),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":ne,"disabled-minutes":W,"hide-disabled-options":!0,"show-now":!1,disabled:!_.value,onOpenChange:Z,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(m(),te(F,{key:1,locale:k(V)},{default:b(()=>[a(N,{value:P.value,"onUpdate:value":n[5]||(n[5]=t=>P.value=t),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":ne,"disabled-minutes":W,"hide-disabled-options":!0,"show-now":!1,disabled:!_.value,onOpenChange:me,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",Et,[a(u,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",Gt,s(o.$t("Booking.shuttleBusTime")),1)]),a(F,{locale:k(V)},{default:b(()=>[e("div",Kt,[a(j,{direction:"vertical",size:12},{default:b(()=>[a(H,{value:d.value,"onUpdate:value":n[6]||(n[6]=t=>d.value=t),disabled:!0},null,8,["value"])]),_:1}),a(N,{value:T.value,"onUpdate:value":n[7]||(n[7]=t=>T.value=t),"minute-step":30,"value-format":"HH:mm",disabled:!0,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),a(re),e("div",Qt,[e("div",Zt,[e("p",Jt,s(o.$t("Booking.adultTicket")),1),e("div",Xt,[e("button",{onClick:n[8]||(n[8]=t=>ie("adult"))},[a(u,{name:"i-mdi-minus-circle-outline"})]),e("p",el,s(M.value.adult),1),e("button",{onClick:n[9]||(n[9]=t=>fe("adult"))},[a(u,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",tl,[e("div",ll,[e("p",ol,s(o.$t("Booking.childTicket")),1),e("div",sl,[e("button",{onClick:n[10]||(n[10]=t=>ie("child"))},[a(u,{name:"i-mdi-minus-circle-outline"})]),e("p",al,s(M.value.child),1),e("button",{onClick:n[11]||(n[11]=t=>fe("child"))},[a(u,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",nl,[e("p",il,s(o.$t("Booking.ticketPrice")),1),e("p",rl,"NT$ "+s(k(I))+s(o.$t("Booking.pricePerPerson")),1)]),e("div",dl,[e("p",ul,s(o.$t("Booking.contact")),1),A(e("input",{type:"text",placeholder:o.$t("Booking.required"),"onUpdate:modelValue":n[12]||(n[12]=t=>C.value=t),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,cl),[[G,C.value]])]),e("div",ml,[e("p",pl,s(o.$t("Booking.phone")),1),A(e("input",{type:"text",placeholder:o.$t("Booking.required"),"onUpdate:modelValue":n[13]||(n[13]=t=>x.value=t),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,fl),[[G,x.value]])])]),e("div",vl,[A(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":n[14]||(n[14]=t=>U.value=t),class:"h-5 w-3 border-black rounded-full"},null,512),[[Pe,U.value]]),e("label",_l,s(o.$t("HomePage.readAgreement")),1),a(we)]),e("div",hl,[a(l,{type:"primary",onClick:ve,class:"w-2/3 rounded-lg !bg-lwm-400 text-white active:!bg-lime-700"},{default:b(()=>[xe(s(o.$t("HomePage.confirm")),1)]),_:1})])],64)}}}),bl={class:"flex-col p-4"},yl={class:"border-l-4 my-3 border-lwm-400 text-justify pl-2"},xl={class:"flex justify-around"},$l={class:"flex"},kl={class:"flex-1 text-gray-500 ml-2"},wl={class:"flex"},Hl={class:"flex-1 text-gray-500 ml-2"},Bl={class:"flex justify-evenly"},Tl={class:"ml-auto text-2xl"},Pl={class:"mr-auto text-2xl"},Dl={class:"flex flex-col pt-3 pl-4"},Ol={key:0,class:"flex items-center pb-1"},Ml={class:"flex pr-4"},Ul={class:"text-lwm-500"},Cl={class:"border rounded-lg"},Rl=["placeholder"],Al={class:"flex"},Sl={key:0,class:"text-lwm-500"},Yl={key:1,class:"text-lwm-500"},jl={class:"flex pt-2 pl-4 space-x-4"},Nl={class:"flex flex-col py-2 pl-4"},Ll={class:"flex items-center"},Vl={class:"flex pr-4"},zl={class:"text-lwm-500"},Il={class:"flex pl-4"},ql={class:"text-lwm-500"},Wl={class:"flex pt-2 pl-4 space-x-4"},Fl={class:"border-l-4 my-3 border-orange-400 text-justify pl-2"},El={class:"flex justify-around"},Gl={class:"flex"},Kl={class:"flex-1 text-gray-500 ml-2"},Ql={class:"flex"},Zl={class:"flex-1 text-gray-500 ml-2"},Jl={class:"flex justify-evenly"},Xl={class:"ml-auto text-2xl"},eo={class:"mr-auto text-2xl"},to={class:"flex flex-col pt-3 pl-4"},lo={key:0,class:"flex items-center pb-1"},oo={class:"flex pr-4"},so={class:"text-lwm-500"},ao={class:"border rounded-lg"},no=["placeholder"],io={class:"flex"},ro={key:0,class:"text-lwm-500"},uo={key:1,class:"text-lwm-500"},co={class:"flex pt-2 pl-4 space-x-4"},mo={class:"flex flex-col py-2 pl-4"},po={class:"flex items-center"},fo={class:"flex pr-4"},vo={class:"text-lwm-500"},_o={class:"flex pl-4"},ho={class:"text-lwm-500"},go={class:"flex pt-2 pl-4 space-x-4"},bo={class:"flex pl-6 pt-2 justify-evenly content-center"},yo={class:"flex flex-1"},xo={class:"flex-1"},$o={class:"flex-1 flex"},ko={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},wo={class:"flex pl-6 pt-2 justify-evenly content-center"},Ho={class:"flex flex-1"},Bo={class:"flex-1"},To={class:"flex-1 flex"},Po={class:"border border-gray-300 bg-gray-white w-fit px-4 mx-1 my-auto text-sm rounded-full"},Do={class:"flex pl-6 pt-3 justify-evenly content-center"},Oo={class:"flex-1"},Mo={class:"flex-1"},Uo={class:"flex py-4 px-6 content-center"},Co={class:"flex-none pr-6"},Ro=["placeholder"],Ao={class:"flex py-4 px-6 content-center"},So={class:"flex-none pr-2"},Yo=["placeholder"],jo={class:"flex justify-center"},No={for:"checkbox",class:"ml-2 text-sm text-gray-700"},Lo={class:"pt-1 flex justify-center pb-4"},Vo=ue({__name:"RoundedWayTicket",setup(p){const y=r("roundTrip"),{t:g}=oe(),U=Be(),{locale:v}=oe(),d=r(!1),_=r(),T=r(),x=r(),O=r(),P=r(""),f=r(""),C=r(""),M=r(""),Y=r(""),I=r(""),$=r(""),L=r(""),q=r(""),V=r(!1),w=r({adult:1,child:1}),se=r(""),ae=r(""),ne=de(()=>{const l=w.value.adult;return Math.min(l,2)*300+Math.max(l-2,0)*200}),W=r({p2:g("Booking.pier"),p3:g("Booking.airport")}),Q=r({p2:g("Booking.airport"),p3:g("Booking.pier")}),ce=()=>Array.from({length:24},(l,t)=>t).filter(l=>l<8||l>18),me=l=>l===8?Array.from({length:60},(t,i)=>i).filter(t=>t<30):l===18?Array.from({length:60},(t,i)=>i).filter(t=>t>=30):[],Z=()=>{const l=D(Y.value,"HH:mm").hour();return Array.from({length:24},(t,i)=>i).filter(t=>t<l||t>18)},J=l=>{const t=D(Y.value,"HH:mm").minute();return l===8?Array.from({length:60},(i,B)=>B).filter(i=>i<30):l===19?Array.from({length:60},(i,B)=>B).filter(i=>i>=1):Array.from({length:60},(i,B)=>B).filter(i=>i<t)},pe=l=>{l&&le.info(g("alertMessage"))},fe=l=>{l&&le.info(g("alertMessage2"))},ie=l=>{l&&le.info(g("alertMessage3"))};ee(P,l=>{if(l){const t=D(l,"HH:mm").add(30,"minute"),i=D(l,"HH:mm").add(90,"minute");M.value=i.format("HH:mm"),Y.value=i.format("HH:mm"),f.value=t.format("HH:mm")}else f.value="",Y.value="",M.value=""}),ee(L,l=>{if(l){const t=D(l,"HH:mm").add(30,"minute"),i=D(l,"HH:mm").add(90,"minute");$.value=i.format("HH:mm"),I.value=i.format("HH:mm"),q.value=t.format("HH:mm")}else q.value="",$.value="",I.value=""}),ee(x,l=>{l?O.value=l:O.value=void 0}),ee(_,l=>{l?T.value=l:(T.value=void 0,P.value="")});const ve=l=>{if(!re.value)return!0;const t=l&&l.isBefore(D().add(1,"day").startOf("day")),i=N.value.some(B=>{const S=D(B.startOffDays),R=B.endOffDays?D(B.endOffDays):S;return console.log("OffDay Range:",S.format("YYYY-MM-DD"),"to",R.format("YYYY-MM-DD")),l.isSameOrAfter(S,"day")&&l.isSameOrBefore(R,"day")});return t||i},_e=l=>l&&(!_.value||l.isBefore(_.value)),he=l=>l&&(!_.value||l.isBefore(_.value)),X=()=>{d.value=!d.value},ke={"zh-CN":Ce,"zh-TW":ge,"en-US":Ae},o=de(()=>ke[v.value]||ge),n=l=>{Re.open({message:g("HomePage.notification.title"),description:g("HomePage.notification.description"),placement:l})},u=l=>{w.value[l]++},H=l=>{w.value[l]>0&&w.value[l]--},j=async()=>{if(!V.value)n("bottom");else{let l=await be();if((!l||!l.user_id)&&(alert(g("alertMessage13")),l=await be(),!l)){console.log("登入失敗");return}const t={trip_type:y.value,LineID:l.user_id,adult_num:w.value.adult,child_num:w.value.child,contact_phone:ae.value,totalprice:ne.value,contact_name:se.value,departure_loc:d.value?"Booking.airport":"Booking.pier",destination_loc:d.value?"Booking.pier":"Booking.airport",return_departure:d.value?"Booking.pier":"Booking.airport",return_destination:d.value?"Booking.airport":"Booking.pier",arrivalpoint_date:_.value?_.value.format("YYYY-MM-DD"):void 0,arrivalpoint_time:P.value,return_arrival_date:x.value?x.value.format("YYYY-MM-DD"):void 0,return_arrival_time:L.value,flight_num:C.value||void 0,ferry_time:Y.value||void 0,flight_time:M.value||void 0,shuttle_date:T.value?T.value.format("YYYY-MM-DD"):void 0,shuttle_time:f.value,return_shuttle_date:O.value?O.value.format("YYYY-MM-DD"):void 0,return_shuttle_time:q.value};try{const i=await $fetch("/api/POSTbooking",{method:"POST",body:t});if(console.log(i),i!=null&&i.id){const B=i.id[0].id;console.log("id check2:"+B);const S=U("/confirmationPage/"+B);De({path:S,query:{isSwapped:String(d.value)}})}}catch{alert(g("alertMessage4"))}}},N=r([]),F=r([]),re=r(!1);return Te(async()=>{if(!re.value)try{const l=await $fetch("/api/GETallOffdays");F.value=l.data,N.value=F.value.map(t=>({id:t.id,startOffDays:t.start_offDays,endOffDays:t.end_offDays,created_at:t.created_at,create_by:t.created_by})),re.value=!0}catch{alert(g("alertMessage15"))}}),(l,t)=>{const i=ye,B=Se,S=Ye,R=Me,z=Ue,Le=Oe,Ve=Ne,ze=je;return m(),h("div",bl,[e("div",null,[e("p",yl,s(l.$t("Booking.outward")),1)]),e("div",xl,[e("div",$l,[a(i,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",kl,s(l.$t("Booking.departure")),1)]),e("div",wl,[a(i,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",Hl,s(l.$t("Booking.arrival")),1)])]),e("div",Bl,[e("p",Tl,s(d.value?Q.value.p2:W.value.p2),1),a(i,{name:"fa6-solid:rotate",class:E(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":d.value}]),onClick:X},null,8,["class"]),e("p",Pl,s(d.value?Q.value.p3:W.value.p3),1)]),t[21]||(t[21]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",Dl,[d.value?(m(),h("div",Ol,[e("div",Ml,[a(i,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",Ul,s(l.$t("Booking.flightNumber")),1)]),e("div",Cl,[A(e("input",{type:"text",placeholder:l.$t("Booking.required"),"onUpdate:modelValue":t[0]||(t[0]=c=>C.value=c),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,Rl),[[G,C.value]])])])):K("",!0),e("div",Al,[a(i,{name:d.value?"i-material-symbols-flight-land":"i-majesticons-ship-line",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),d.value?(m(),h("p",Sl,s(l.$t("Booking.arrivalAtAirportTime")),1)):(m(),h("p",Yl,s(l.$t("Booking.arrivalPortTime")),1))])]),a(z,{locale:k(o)},{default:b(()=>[e("div",jl,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:_.value,"onUpdate:value":t[1]||(t[1]=c=>_.value=c),"disabled-date":ve,"show-today":!1,onOpenChange:fe,inputReadOnly:!0},null,8,["value"])]),_:1}),a(R,{value:P.value,"onUpdate:value":t[2]||(t[2]=c=>P.value=c),"value-format":"HH:mm","disabled-hours":ce,"disabled-minutes":me,"minute-step":d.value?5:30,"hour-step":1,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!_.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",Nl,[e("div",Ll,[e("div",Vl,[a(i,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",zl,s(d.value?l.$t("Booking.ferryTime"):l.$t("Booking.flightTime")),1)]),e("div",null,[d.value?(m(),te(z,{key:0,locale:k(o)},{default:b(()=>[a(R,{value:Y.value,"onUpdate:value":t[3]||(t[3]=c=>Y.value=c),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":Z,"disabled-minutes":J,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:pe,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(m(),te(z,{key:1,locale:k(o)},{default:b(()=>[a(R,{value:M.value,"onUpdate:value":t[4]||(t[4]=c=>M.value=c),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":Z,"disabled-minutes":J,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:ie,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",Il,[a(i,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",ql,s(l.$t("Booking.shuttleBusTime")),1)]),a(z,{locale:k(o)},{default:b(()=>[e("div",Wl,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:T.value,"onUpdate:value":t[5]||(t[5]=c=>T.value=c),disabled:!0,"disabled-date":_e},null,8,["value"])]),_:1}),a(R,{value:f.value,"onUpdate:value":t[6]||(t[6]=c=>f.value=c),"value-format":"HH:mm",disabled:!0,"minute-step":30,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),t[22]||(t[22]=e("div",{class:"border-b-2 py-3 border-dashed border-gray-500"},null,-1)),e("p",Fl,s(l.$t("Booking.return")),1),e("div",El,[e("div",Gl,[a(i,{name:"i-material-symbols-directions-car",class:"bg-gray-500 w-6 h-6"}),e("p",Kl,s(l.$t("Booking.departure")),1)]),e("div",Ql,[a(i,{name:"i-mdi-map-marker-radius-outline",class:"bg-gray-500 w-6 h-6"}),e("p",Zl,s(l.$t("Booking.arrival")),1)])]),e("div",Jl,[e("p",Xl,s(d.value?W.value.p2:Q.value.p2),1),a(i,{name:"fa6-solid:rotate",class:E(["mx-auto bg-lwm-400 w-7 h-7 cursor-pointer transition-transform duration-500",{"rotate-180":d.value}]),onClick:X},null,8,["class"]),e("p",eo,s(d.value?W.value.p3:Q.value.p3),1)]),t[23]||(t[23]=e("div",{class:"border-b-2 py-3"},null,-1)),e("div",to,[d.value?K("",!0):(m(),h("div",lo,[e("div",oo,[a(i,{name:"lucide:tickets",class:"bg-lwm-50 w-6 h-6"}),e("p",so,s(l.$t("Booking.flightNumber")),1)]),e("div",ao,[A(e("input",{type:"text",placeholder:l.$t("Booking.required"),"onUpdate:modelValue":t[7]||(t[7]=c=>C.value=c),class:"flex-1 px-2 py-1 w-full bg-white rounded-lg focus:outline-none text-sm"},null,8,no),[[G,C.value]])])])),e("div",io,[a(i,{name:d.value?"i-majesticons-ship-line":"i-material-symbols-flight-land",class:"bg-lwm-50 w-6 h-6"},null,8,["name"]),d.value?(m(),h("p",ro,s(l.$t("Booking.arrivalPortTime")),1)):(m(),h("p",uo,s(l.$t("Booking.arrivalAtAirportTime")),1))])]),a(z,{locale:k(o)},{default:b(()=>[e("div",co,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:x.value,"onUpdate:value":t[8]||(t[8]=c=>x.value=c),"disabled-date":ve,"show-today":!1,inputReadOnly:!0},null,8,["value"])]),_:1}),a(R,{value:L.value,"onUpdate:value":t[9]||(t[9]=c=>L.value=c),"value-format":"HH:mm","disabled-hours":ce,"disabled-minutes":me,"minute-step":d.value?30:5,"hour-step":1,"hide-disabled-options":!0,"show-now":!1,format:"HH:mm",disabled:!x.value,inputReadOnly:!0},null,8,["value","minute-step","disabled"])])]),_:1},8,["locale"]),e("div",mo,[e("div",po,[e("div",fo,[a(i,{name:"lucide:tickets",class:"bg-lwm-100 w-6 h-6"}),e("p",vo,s(d.value?l.$t("Booking.flightTime"):l.$t("Booking.ferryTime")),1)]),e("div",null,[d.value?(m(),te(z,{key:0,locale:k(o)},{default:b(()=>[a(R,{value:I.value,"onUpdate:value":t[10]||(t[10]=c=>I.value=c),"minute-step":5,"value-format":"HH:mm",format:"HH:mm","disabled-hours":Z,"disabled-minutes":J,"hide-disabled-options":!0,"show-now":!1,disabled:!P.value,onOpenChange:ie,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"])):(m(),te(z,{key:1,locale:k(o)},{default:b(()=>[a(R,{value:$.value,"onUpdate:value":t[11]||(t[11]=c=>$.value=c),"minute-step":30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":Z,"disabled-minutes":J,"hide-disabled-options":!0,"show-now":!1,disabled:!L.value,onOpenChange:pe,inputReadOnly:!0},null,8,["value","disabled"])]),_:1},8,["locale"]))])])]),e("div",_o,[a(i,{name:"i-material-symbols-directions-car",class:"bg-lwm-100 w-6 h-6"}),e("p",ho,s(l.$t("Booking.shuttleBusTime")),1)]),a(z,{locale:k(o)},{default:b(()=>[e("div",go,[a(S,{direction:"vertical",size:12},{default:b(()=>[a(B,{value:O.value,"onUpdate:value":t[12]||(t[12]=c=>O.value=c),disabled:!0,"disabled-date":he},null,8,["value"])]),_:1}),a(R,{value:q.value,"onUpdate:value":t[13]||(t[13]=c=>q.value=c),"value-format":"HH:mm",disabled:!0,"minute-step":30,format:"HH:mm"},null,8,["value"])])]),_:1},8,["locale"]),a(Le),e("div",bo,[e("div",yo,[e("p",xo,s(l.$t("Booking.adultTicket")),1),e("div",$o,[e("button",{onClick:t[14]||(t[14]=c=>H("adult"))},[a(i,{name:"i-mdi-minus-circle-outline"})]),e("p",ko,s(w.value.adult),1),e("button",{onClick:t[15]||(t[15]=c=>u("adult"))},[a(i,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",wo,[e("div",Ho,[e("p",Bo,s(l.$t("Booking.childTicket")),1),e("div",To,[e("button",{onClick:t[16]||(t[16]=c=>H("child"))},[a(i,{name:"i-mdi-minus-circle-outline"})]),e("p",Po,s(w.value.child),1),e("button",{onClick:t[17]||(t[17]=c=>u("child"))},[a(i,{name:"i-material-symbols-add-circle-outline"})])])])]),e("div",Do,[e("p",Oo,s(l.$t("Booking.ticketPrice")),1),e("p",Mo,"NT$ "+s(k(ne))+s(l.$t("Booking.pricePerPerson")),1)]),e("div",Uo,[e("p",Co,s(l.$t("Booking.contact")),1),A(e("input",{"onUpdate:modelValue":t[18]||(t[18]=c=>se.value=c),type:"text",placeholder:l.$t("Booking.required"),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,Ro),[[G,se.value]])]),e("div",Ao,[e("p",So,s(l.$t("Booking.phone")),1),A(e("input",{"onUpdate:modelValue":t[19]||(t[19]=c=>ae.value=c),type:"text",placeholder:l.$t("Booking.required"),class:"flex-1 px-2 border-b-2 border-gray-600 bg-inherit focus:outline-none text-sm min-w-0"},null,8,Yo),[[G,ae.value]])]),e("div",jo,[A(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[20]||(t[20]=c=>V.value=c),class:"h-5 w-3 border-black rounded-full"},null,512),[[Pe,V.value]]),e("label",No,s(l.$t("HomePage.readAgreement")),1),a(Ve)]),e("div",Lo,[a(ze,{type:"primary",onClick:j,class:"w-2/3 rounded-lg !bg-lwm-400 text-white active:!bg-lime-700"},{default:b(()=>[xe(s(l.$t("HomePage.confirm")),1)]),_:1})])])}}}),zo={class:"flex flex-col pb-16"},Io={class:"shadow mt-6 mx-10 rounded-lg bg-gray-50"},qo={class:"flex"},Wo={key:0},Fo={key:1},ts=ue({__name:"index",setup(p){oe(),r(!1);const y=r(1),g=U=>{y.value=U};return(U,v)=>{const d=st,_=gl,T=Vo;return m(),h($e,null,[a(d),e("div",zo,[e("div",Io,[e("div",qo,[e("div",{onClick:v[1]||(v[1]=x=>g(1)),class:E([{"bg-lwm-100 rounded-tl-lg text-white":y.value===2},"flex-1 flex justify-center rounded-tl-lg transition-all duration-300 ease-in-out transform hover:scale-[1.01] active:scale-95 cursor-pointer"])},[e("button",{onClick:v[0]||(v[0]=x=>g(1)),class:E({" text-lwm-400 font-bold":y.value===1})},s(U.$t("HomePage.oneWay")),3)],2),e("div",{onClick:v[3]||(v[3]=x=>g(2)),class:E([{"bg-lwm-100 rounded-tr-lg text-white":y.value===1},"flex-1 flex justify-center rounded-tr-lg transition-all duration-300 ease-in-out transform hover:scale-[1.01] active:scale-95 cursor-pointer"])},[e("button",{onClick:v[2]||(v[2]=x=>g(2)),class:E({" text-lwm-400 font-bold":y.value===2})},s(U.$t("HomePage.roundTrip")),3)],2)]),y.value===1?(m(),h("div",Wo,[a(_)])):K("",!0),y.value===2?(m(),h("div",Fo,[a(T)])):K("",!0)])])],64)}}});export{ts as default};
