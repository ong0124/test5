import{_ as de}from"./CEk5jK4J.js";import ue from"./WdXkZEf3.js";import{T as d}from"./8j5twG2A.js";import{d as ce,u as _e,a as pe,n as z,r as u,p,q as me,H as k,o as he,b as c,c as _,e,f as n,t as l,j as P,k as a,i as Y,B as I,F as L,w as b,v as E,C as A}from"./BFyekfM-.js";import{T as fe,C as ve,l as q,b as ge}from"./I495IMiT.js";import{l as be}from"./BRzjsaJp.js";import{D as ye,S as xe}from"./DrVHbGuf.js";const ke={class:"py-4 border-b bg-[url('/assets/images/headerTest3.png')] bg-cover bg-center flex items-center"},we={class:"absolute left-1/2 transform -translate-x-1/2 text-xl text-white capitalize"},Te={class:"flex bg-orange-100 pl-4 items-center h-8 overflow-hidden relative text-red-500"},Be={class:"marquee-container flex-1 overflow-hidden"},$e={class:"whitespace-nowrap animate-marquee"},De={class:"px-4"},Me={class:"px-6 pt-4"},Re={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2 border-dashed"},Ce={class:"border-l-4 border-orange-300 text-gray-500"},He={class:"mx-2 text-lg font-bold"},Pe={class:"text-gray-500"},Ye={class:"flex"},Ue={class:"flex-1 self-center"},Fe={class:"text-end"},Ne={class:"flex-1 flex-col text-center"},Ve={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},Se={class:"text-sm"},je={class:"flex-1 self-center"},Oe={class:"grid grid-cols-2 pt-4"},ze={class:"flex-col text-start ml-14"},Ie={class:"flex-col text-start ml-5"},Le={key:0},Ee={class:"bg-amber-50 p-4 rounded-lg flex flex-col border-b-2"},Ae={class:"border-l-4 border-orange-300 text-gray-500"},qe={class:"mx-2 text-lg font-bold"},Ge={class:"text-gray-500"},We={class:"flex"},Je={class:"flex-1 self-center"},Ke={class:"text-end"},Qe={class:"flex-1 flex-col text-center"},Xe={class:"border-b-2 border-dashed mx-4 border-lwm-400 text-sm"},Ze={class:"text-sm"},et={class:"flex-1 self-center"},tt={class:"grid grid-cols-2 pt-4"},st={class:"flex-col text-start ml-14"},lt={class:"flex-col text-start ml-5"},ot={class:"px-6 pb-24"},at={class:"bg-white shadow-md rounded-b-xl overflow-hidden pt-5 pb-2 px-6 space-y-3"},nt={class:"text-xl font-semibold text-gray-800"},rt={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},it={class:"font-medium text-gray-700"},dt={key:0,class:"text-blue-500"},ut={key:1},ct={class:"font-medium text-gray-700"},_t={key:0,class:"text-blue-500"},pt={key:1},mt={class:"border-l-4 border-lwm-300 items-center"},ht={class:"text-gray-500 font-semibold ml-1"},ft={class:"flex items-center justify-between bg-gray-100 p-3 rounded-lg px-8"},vt={class:"font-medium text-gray-700"},gt={key:0,class:"text-blue-500"},bt={key:1},yt={class:"font-medium text-gray-700"},xt={key:0,class:"text-blue-500"},kt={key:1},wt={class:"flex items-center"},Tt={class:"text-gray-600 font-semibold mr-3"},Bt={class:"flex space-x-4"},$t={class:"space-y-2"},Dt={class:"flex items-center"},Mt={class:"text-gray-600 font-semibold"},Rt={class:"flex space-x-4"},Ct={key:1,class:"space-y-2"},Ht={class:"flex items-center"},Pt={class:"text-gray-600 font-semibold"},Yt={class:"flex space-x-4"},Ut={class:"space-y-4"},Ft={class:"flex items-center space-x-4 ml-4"},Nt={class:"text-gray-600 font-medium"},Vt=["placeholder"],St={class:"flex items-center space-x-4"},jt={class:"text-gray-600 font-medium"},Ot=["placeholder"],zt={class:"flex bg-white pt-1 rounded-b-lg mb-2"},It={class:"flex-1 border-r-2 border-t-2 rounded flex justify-center"},Lt={class:"flex-1 border-t-2 rounded flex justify-center"},Xt=ce({__name:"[id]",setup(Et){const G=_e(),U=pe(),{t:m}=z(),w=G.params.id,T=u(""),B=u(""),y=u(),f=u(""),x=u(),$=u(""),W=u(""),J=u(""),F=p(()=>{const t=v.value.adult;return Math.min(t,2)*150+Math.max(t-2,0)*100});p(()=>F.value-Number(s.totalprice));const{locale:K}=z(),r=u(!1),N=()=>{r.value=!r.value};u(""),u("");const Q={"zh-CN":ge,"zh-TW":q,"en-US":be},D=p(()=>Q[K.value]||q),V=t=>t&&t.isBefore(k().add(1,"day").startOf("day")),M=()=>Array.from({length:24},(t,o)=>o).filter(t=>t<8||t>18),R=t=>t===8?Array.from({length:60},(o,g)=>g).filter(o=>o<30):t===18?Array.from({length:60},(o,g)=>g).filter(o=>o>=1):[],X=p(()=>r.value?s.destination_loc:s.departure_loc),Z=p(()=>r.value?s.departure_loc:s.destination_loc),ee=p(()=>r.value?s.return_destination:s.return_departure),te=p(()=>r.value?s.return_departure:s.return_destination),se=async t=>{try{await $fetch("/api/DeleteBookingById/"+t,{method:"DELETE"}),alert(m("alertMessage5")),U.push("/")}catch{alert(m("alertMessage6"))}},le=async()=>{try{const t={departure_loc:X.value,destination_loc:Z.value,return_departure:ee.value,return_destination:te.value,shuttle_date:y.value?y.value.format("YYYY-MM-DD"):s.shuttle_date,shuttle_time:f.value||s.shuttle_time,return_shuttle_date:x.value?x.value.format("YYYY-MM-DD"):s.return_shuttle_date,return_shuttle_time:$.value||s.return_shuttle_time,ferry_time:W.value||s.ferry_time,flight_time:J.value||s.flight_time,adult_num:v.value.adult||s.adult_num,child_num:v.value.child||s.child_num,contact_phone:T.value||s.contact_phone,contact_name:B.value||s.contact_name,totalprice:F.value||s.totalprice};await $fetch("/api/detailsUpdate/"+w,{method:"PUT",body:t}),alert(m("alertMessage7")),U.push("/")}catch(t){console.error("Update failed:",t),alert(m("alertMessage8"))}},s=me({trip_type:"",LineID:"",adult_num:"",child_num:"",contact_phone:"",totalprice:"",contact_name:"",departure_loc:"",destination_loc:"",return_departure:"",return_destination:"",arrivalpoint_date:"",arrivalpoint_time:"",flight_num:"",ferry_time:"",flight_time:"",shuttle_date:k(),shuttle_time:"",return_shuttle_date:k(),return_shuttle_time:""}),oe=async()=>{try{const o=(await $fetch(`/api/reschedulePage/details/${w}`)).data;Object.assign(s,{trip_type:o.trip_type,LineID:o.LineID,adult_num:o.adult_num,child_num:o.child_num,contact_phone:o.contact_phone,totalprice:o.totalprice,contact_name:o.contact_name,departure_loc:o.departure_loc,destination_loc:o.destination_loc,return_departure:o.return_departure,return_destination:o.return_destination,arrivalpoint_date:o.arrivalpoint_date,arrivalpoint_time:o.arrivalpoint_time,flight_num:o.flight_num,ferry_time:o.ferry_time,flight_time:o.flight_time,shuttle_date:o.shuttle_date,shuttle_time:o.shuttle_time,return_shuttle_date:o.return_shuttle_date,return_shuttle_time:o.return_shuttle_time}),v.value.adult=Number(s.adult_num)||0,v.value.child=Number(s.child_num)||0,console.log("form:",s)}catch(t){console.error("Error fetching booking:",t),alert("Get blog detail error")}},v=u({adult:0,child:0}),S=t=>t?k(t).format("YYYY-MM-DD"):"N/A",ae=p(()=>s.departure_loc==="Booking.pier"?s.flight_time:s.ferry_time),ne=p(()=>s.departure_loc==="Booking.pier"?m("Booking.flightTime"):m("Booking.ferryTime")),re=p(()=>s.return_departure==="Booking.pier"?s.flight_time:s.ferry_time),ie=p(()=>s.return_departure==="Booking.pier"?m("Booking.flightTime"):m("Booking.ferryTime"));return he(oe),(t,o)=>{const g=de,h=ue,C=fe,H=ve,j=ye,O=xe;return c(),_(L,null,[e("header",ke,[e("div",null,[n(g)]),e("h1",we,l(t.$t("ReschedulePage.title")),1)]),e("div",Te,[n(h,{name:"gg:danger",class:"bg-red-500 w-8 h-5 flex-shrink-0"}),P(" "+l(t.$t("announcementMessage"))+" "+l(":")+"  ",1),e("div",Be,[e("div",$e,[e("span",De,l(t.$t("ReschedulePage.message")),1)])])]),e("div",Me,[e("div",Re,[e("div",Ce,[e("p",He,l(t.$t("ReschedulePage.originalSchedule")),1)]),e("div",Pe,[e("div",Ye,[e("div",Ue,[e("p",Fe,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).departure_loc)),1)]),e("div",Ne,[e("div",Ve,[e("p",null,l(S(a(s).shuttle_date)),1)]),e("div",Se,[e("p",null,l(a(s).shuttle_time),1)])]),e("div",je,[e("p",null,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).destination_loc)),1)])]),e("div",Oe,[e("div",ze,[e("p",null,l(ne.value),1),e("p",null,l(t.$t("Booking.contact")),1),e("p",null,l(t.$t("Booking.phone")),1),e("p",null,l(t.$t("Booking.adultTicket")),1),e("p",null,l(t.$t("Booking.childTicket1")),1)]),e("div",Ie,[e("p",null,l(ae.value),1),e("p",null,l(a(s).contact_name),1),e("p",null,l(a(s).contact_phone),1),e("p",null,l(a(s).adult_num),1),e("p",null,l(a(s).child_num),1)])])])]),a(s).trip_type==="roundTrip"?(c(),_("div",Le,[e("div",Ee,[e("div",Ae,[e("p",qe,l(t.$t("Booking.return")),1)]),e("div",Ge,[e("div",We,[e("div",Je,[e("p",Ke,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_departure)),1)]),e("div",Qe,[e("div",Xe,[e("p",null,l(S(a(s).return_shuttle_date)),1)]),e("div",Ze,[e("p",null,l(a(s).return_shuttle_time),1)])]),e("div",et,[e("p",null,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_destination)),1)])]),e("div",tt,[e("div",st,[e("p",null,l(ie.value),1),e("p",null,l(t.$t("Booking.contact")),1),e("p",null,l(t.$t("Booking.phone")),1),e("p",null,l(t.$t("Booking.adultTicket")),1),e("p",null,l(t.$t("Booking.childTicket1")),1)]),e("div",lt,[e("p",null,l(re.value),1),e("p",null,l(a(s).contact_name),1),e("p",null,l(a(s).contact_phone),1),e("p",null,l(a(s).adult_num),1),e("p",null,l(a(s).child_num),1)])])])])])):Y("",!0)]),e("div",ot,[e("div",at,[e("h2",nt,l(t.$t("ReschedulePage.newSchedule")),1),e("div",rt,[e("p",it,[r.value?(c(),_("span",dt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).destination_loc)),1)):(c(),_("span",ut,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).departure_loc)),1))]),n(h,{name:"fa6-solid:rotate",class:I(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:N},null,8,["class"]),e("p",ct,[r.value?(c(),_("span",_t,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).departure_loc)),1)):(c(),_("span",pt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).destination_loc)),1))])]),a(s).trip_type==="roundTrip"?(c(),_(L,{key:0},[e("div",mt,[e("span",ht,l(t.$t("Booking.return"))+" : ",1)]),e("div",ft,[e("p",vt,[r.value?(c(),_("span",gt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_destination)),1)):(c(),_("span",bt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_departure)),1))]),n(h,{name:"fa6-solid:rotate",class:I(["mx-4 bg-lwm-400 text-white p-2 rounded-full w-6 h-6 cursor-pointer transition-transform duration-500",{"rotate-180":r.value}]),onClick:N},null,8,["class"]),e("p",yt,[r.value?(c(),_("span",xt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_departure)),1)):(c(),_("span",kt,l(("Translate_loc"in t?t.Translate_loc:a(d))(a(s).return_destination)),1))])])],64)):Y("",!0),e("div",wt,[n(h,{name:"lucide:tickets",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Tt,l(t.$t("Booking.flightTime")),1),n(H,{locale:D.value},{default:b(()=>[e("div",Bt,[n(C,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":M,"disabled-minutes":R,"hide-disabled-options":!0,"show-now":!1,value:f.value,"onUpdate:value":o[0]||(o[0]=i=>f.value=i)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),e("div",$t,[e("div",Dt,[n(h,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-400 mr-1"}),e("p",Mt,l(t.$t("ReschedulePage.departureTime")),1)]),n(H,{locale:D.value},{default:b(()=>[e("div",Rt,[n(O,{direction:"vertical",size:12},{default:b(()=>[n(j,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":V,value:y.value,"onUpdate:value":o[1]||(o[1]=i=>y.value=i)},null,8,["value"])]),_:1}),n(C,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":M,"disabled-minutes":R,"hide-disabled-options":!0,"show-now":!1,value:f.value,"onUpdate:value":o[2]||(o[2]=i=>f.value=i)},null,8,["minute-step","value"])])]),_:1},8,["locale"])]),a(s).trip_type==="roundTrip"?(c(),_("div",Ct,[e("div",Ht,[n(h,{name:"mdi:bus-clock",class:"w-5 h-5 text-lwm-50 mr-1"}),e("p",Pt,l(t.$t("ReschedulePage.returnDepartureTime")),1)]),n(H,{locale:D.value},{default:b(()=>[e("div",Yt,[n(O,{direction:"vertical",size:12},{default:b(()=>[n(j,{class:"border-gray-300 rounded-lg","show-today":!1,"disabled-date":V,value:x.value,"onUpdate:value":o[3]||(o[3]=i=>x.value=i)},null,8,["value"])]),_:1}),n(C,{class:"border-gray-300 rounded-lg","minute-step":r.value?5:30,"value-format":"HH:mm",format:"HH:mm","disabled-hours":M,"disabled-minutes":R,"hide-disabled-options":!0,"show-now":!1,value:$.value,"onUpdate:value":o[4]||(o[4]=i=>$.value=i)},null,8,["minute-step","value"])])]),_:1},8,["locale"])])):Y("",!0),e("div",Ut,[e("div",Ft,[e("p",Nt,[o[8]||(o[8]=e("span",{class:"text-2xl text-red-500"},"*",-1)),P(l(t.$t("Booking.contact")),1)]),E(e("input",{type:"text",placeholder:a(s).contact_name,"onUpdate:modelValue":o[5]||(o[5]=i=>B.value=i),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,Vt),[[A,B.value]])]),e("div",St,[e("p",jt,[o[9]||(o[9]=e("span",{class:"text-2xl text-red-500"},"*",-1)),P(l(t.$t("Booking.phone")),1)]),E(e("input",{type:"text",placeholder:a(s).contact_phone,"onUpdate:modelValue":o[6]||(o[6]=i=>T.value=i),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-lime-500 text-sm"},null,8,Ot),[[A,T.value]])])]),e("div",zt,[e("div",It,[e("button",{onClick:le,class:"text-blue-400 py-2 rounded hover:text-blue-500 transition"},l(t.$t("ReschedulePage.confirmReschedule")),1)]),e("div",Lt,[e("button",{onClick:o[7]||(o[7]=()=>se(a(w))),class:"text-red-500 py-2 rounded hover:text-red-600 transition"},l(t.$t("cancelOrder")),1)])])])])],64)}}});export{Xt as default};
